  [1m[35m (2282.2ms)[0m  [1m[35mCREATE DATABASE "money_tf_development" ENCODING = 'unicode'[0m
  [1m[35m (868.7ms)[0m  [1m[35mCREATE DATABASE "money_tf_test" ENCODING = 'unicode'[0m
  [1m[35m (315.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (163.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (23.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5765488955715387570)[0m
  [1m[35m (3.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to EnablePgCrypto (20220623113514)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (194.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto"[0m
  [1m[36mActiveRecord::SchemaMigration Create (3.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220623113514"]]
  [1m[36mTRANSACTION (48.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (3.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-06-23 14:07:51.871529"], ["updated_at", "2022-06-23 14:07:51.871529"]]
  [1m[36mTRANSACTION (31.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[34mSELECT pg_advisory_unlock(5765488955715387570)[0m
  [1m[35m (3.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5765488955715387570)[0m
  [1m[35m (87.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20220627100927)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (415.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "number" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627100927"]]
  [1m[36mTRANSACTION (16.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateWallets (20220627101129)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (132.0ms)[0m  [1m[35mCREATE TABLE "wallets" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "user_id" uuid NOT NULL, "sold" integer DEFAULT 0 NOT NULL, "cost" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_732f6628c4"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (38.4ms)[0m  [1m[35mCREATE INDEX "index_wallets_on_user_id" ON "wallets" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627101129"]]
  [1m[36mTRANSACTION (16.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAgencies (20220627101239)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (34.9ms)[0m  [1m[35mCREATE TABLE "agencies" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "sold" integer DEFAULT 0, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627101239"]]
  [1m[36mTRANSACTION (15.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCosts (20220627101622)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (120.2ms)[0m  [1m[35mCREATE TABLE "costs" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "min_range" character varying, "max_range" character varying, "percent" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_27278fdb3e"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (38.1ms)[0m  [1m[35mCREATE INDEX "index_costs_on_agency_id" ON "costs" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627101622"]]
  [1m[36mTRANSACTION (22.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSendings (20220627155404)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (85.1ms)[0m  [1m[35mCREATE TABLE "sendings" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "sender" character varying, "receiver" character varying, "amount" character varying, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8208376499"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (37.5ms)[0m  [1m[35mCREATE INDEX "index_sendings_on_agency_id" ON "sendings" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627155404"]]
  [1m[36mTRANSACTION (19.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateWithdrawals (20220627160105)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (71.2ms)[0m  [1m[35mCREATE TABLE "withdrawals" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_b59e4e9bec"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (31.8ms)[0m  [1m[35mCREATE INDEX "index_withdrawals_on_agency_id" ON "withdrawals" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627160105"]]
  [1m[36mTRANSACTION (19.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (18.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(5765488955715387570)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for 127.0.0.1 at 2022-06-28 09:49:23 +0000
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering .vendor/ruby/2.7.0/gems/railties-6.1.6/lib/rails/templates/rails/welcome/index.html.erb
  Rendered .vendor/ruby/2.7.0/gems/railties-6.1.6/lib/rails/templates/rails/welcome/index.html.erb (Duration: 36.2ms | Allocations: 444)
Completed 200 OK in 1303ms (Views: 283.8ms | ActiveRecord: 0.0ms | Allocations: 3621)


Started GET "/agencies" for ::1 at 2022-06-28 10:33:58 +0000
  
ActionController::RoutingError (No route matches [GET] "/agencies"):
  
Started GET "/agencies" for ::1 at 2022-06-28 10:37:46 +0000
Processing by AgenciesController#index as */*
No template found for AgenciesController#index, rendering head :no_content
Completed 204 No Content in 113ms (Allocations: 4431)


  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAgency Create (84.7ms)[0m  [1m[32mINSERT INTO "agencies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2022-06-28 10:39:25.316599"], ["updated_at", "2022-06-28 10:39:25.316599"]]
  [1m[36mTRANSACTION (16.7ms)[0m  [1m[35mCOMMIT[0m
Started GET "/agencies" for ::1 at 2022-06-28 10:39:39 +0000
Processing by AgenciesController#index as */*
No template found for AgenciesController#index, rendering head :no_content
Completed 204 No Content in 1ms (Allocations: 225)


Started GET "/agencies" for ::1 at 2022-06-28 10:40:47 +0000
Processing by AgenciesController#index as */*
  [1m[36mAgency Load (2.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies"[0m
  â†³ app/controllers/agencies_controller.rb:4:in `index'
Completed 200 OK in 123ms (Views: 98.5ms | ActiveRecord: 83.0ms | Allocations: 13257)


  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAgency Load (40.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e9062a0e-1272-434e-8352-2386f3bae4d1"], ["LIMIT", 1]]
  [1m[36mCost Create (46.8ms)[0m  [1m[32mINSERT INTO "costs" ("agency_id", "min_range", "max_range", "percent", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["agency_id", "e9062a0e-1272-434e-8352-2386f3bae4d1"], ["min_range", "0"], ["max_range", "10000"], ["percent", "1"], ["created_at", "2022-06-28 11:43:16.840712"], ["updated_at", "2022-06-28 11:43:16.840712"]]
  [1m[36mTRANSACTION (11.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCost Load (0.7ms)[0m  [1m[34mSELECT "costs".* FROM "costs" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCost Load (0.8ms)[0m  [1m[34mSELECT "costs".* FROM "costs" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAgency Load (0.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e9062a0e-1272-434e-8352-2386f3bae4d1"], ["LIMIT", 1]]
  [1m[36mCost Create (0.6ms)[0m  [1m[32mINSERT INTO "costs" ("agency_id", "min_range", "max_range", "percent", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["agency_id", "e9062a0e-1272-434e-8352-2386f3bae4d1"], ["min_range", "10000"], ["max_range", "20000"], ["percent", "2"], ["created_at", "2022-06-28 11:45:34.492770"], ["updated_at", "2022-06-28 11:45:34.492770"]]
  [1m[36mTRANSACTION (17.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCost Load (0.7ms)[0m  [1m[34mSELECT "costs".* FROM "costs" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mAgency Load (0.4ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" ORDER BY "agencies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCost Load (0.3ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["agency_id", "e9062a0e-1272-434e-8352-2386f3bae4d1"], ["LIMIT", 11]]
  [1m[35m (29.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (5054.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_development"[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (536.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_development"[0m
  [1m[35m (315.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_test"[0m
  [1m[35m (1855.0ms)[0m  [1m[35mCREATE DATABASE "money_tf_development" ENCODING = 'unicode'[0m
  [1m[35m (932.5ms)[0m  [1m[35mCREATE DATABASE "money_tf_test" ENCODING = 'unicode'[0m
  [1m[35m (163.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (107.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5765488955715387570)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to EnablePgCrypto (20220623113514)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (156.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto"[0m
  [1m[36mActiveRecord::SchemaMigration Create (3.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220623113514"]]
  [1m[36mTRANSACTION (16.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20220627100927)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (44.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "number" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627100927"]]
  [1m[36mTRANSACTION (21.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateWallets (20220627101129)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (58.2ms)[0m  [1m[35mCREATE TABLE "wallets" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "user_id" uuid NOT NULL, "balance" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_732f6628c4"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (48.3ms)[0m  [1m[35mCREATE INDEX "index_wallets_on_user_id" ON "wallets" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627101129"]]
  [1m[36mTRANSACTION (19.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAgencies (20220627101239)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (45.4ms)[0m  [1m[35mCREATE TABLE "agencies" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "balance" integer DEFAULT 0, "fee" integer DEFAULT 0, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627101239"]]
  [1m[36mTRANSACTION (12.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCosts (20220627101622)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (44.4ms)[0m  [1m[35mCREATE TABLE "costs" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "amount" integer DEFAULT 0, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_27278fdb3e"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (53.8ms)[0m  [1m[35mCREATE INDEX "index_costs_on_agency_id" ON "costs" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627101622"]]
  [1m[36mTRANSACTION (41.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSendings (20220627155404)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (91.6ms)[0m  [1m[35mCREATE TABLE "sendings" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "sender" character varying, "receiver" character varying, "amount" character varying, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8208376499"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (41.1ms)[0m  [1m[35mCREATE INDEX "index_sendings_on_agency_id" ON "sendings" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627155404"]]
  [1m[36mTRANSACTION (19.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateWithdrawals (20220627160105)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (152.4ms)[0m  [1m[35mCREATE TABLE "withdrawals" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_b59e4e9bec"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (64.2ms)[0m  [1m[35mCREATE INDEX "index_withdrawals_on_agency_id" ON "withdrawals" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627160105"]]
  [1m[36mTRANSACTION (3.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-06-28 15:18:13.728543"], ["updated_at", "2022-06-28 15:18:13.728543"]]
  [1m[36mTRANSACTION (18.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(5765488955715387570)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAgency Create (1.3ms)[0m  [1m[32mINSERT INTO "agencies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2022-06-28 15:19:37.295243"], ["updated_at", "2022-06-28 15:19:37.295243"]]
  [1m[36mTRANSACTION (21.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCost Load (140.2ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["agency_id", "570b60aa-3271-49ff-b773-8e73469aac1f"], ["LIMIT", 11]]
  [1m[36mAgency Load (0.6ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" ORDER BY "agencies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCost Load (0.5ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "570b60aa-3271-49ff-b773-8e73469aac1f"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAgency Load (0.4ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "570b60aa-3271-49ff-b773-8e73469aac1f"], ["LIMIT", 1]]
  [1m[36mCost Create (29.9ms)[0m  [1m[32mINSERT INTO "costs" ("agency_id", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["agency_id", "570b60aa-3271-49ff-b773-8e73469aac1f"], ["amount", 500], ["created_at", "2022-06-28 15:23:33.746549"], ["updated_at", "2022-06-28 15:23:33.746549"]]
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCost Load (0.7ms)[0m  [1m[34mSELECT "costs".* FROM "costs" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCost Load (0.6ms)[0m  [1m[34mSELECT "costs".* FROM "costs" ORDER BY "costs"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAgency Load (0.4ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "570b60aa-3271-49ff-b773-8e73469aac1f"], ["LIMIT", 1]]
  [1m[36mAgency Load (34.4ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" ORDER BY "agencies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCost Load (0.4ms)[0m  [1m[34mSELECT "costs".* FROM "costs" ORDER BY "costs"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAgency Load (0.4ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "570b60aa-3271-49ff-b773-8e73469aac1f"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (394.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_development"[0m
  [1m[35m (299.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_test"[0m
  [1m[35m (1501.2ms)[0m  [1m[35mCREATE DATABASE "money_tf_development" ENCODING = 'unicode'[0m
  [1m[35m (864.8ms)[0m  [1m[35mCREATE DATABASE "money_tf_test" ENCODING = 'unicode'[0m
  [1m[35m (134.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (120.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5765488955715387570)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to EnablePgCrypto (20220623113514)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (163.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto"[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220623113514"]]
  [1m[36mTRANSACTION (13.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20220627100927)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (51.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "number" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627100927"]]
  [1m[36mTRANSACTION (23.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateWallets (20220627101129)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (77.7ms)[0m  [1m[35mCREATE TABLE "wallets" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "user_id" uuid NOT NULL, "balance" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_732f6628c4"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (46.6ms)[0m  [1m[35mCREATE INDEX "index_wallets_on_user_id" ON "wallets" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627101129"]]
  [1m[36mTRANSACTION (20.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAgencies (20220627101239)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (52.9ms)[0m  [1m[35mCREATE TABLE "agencies" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "balance" integer DEFAULT 0, "fee" integer DEFAULT 0, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627101239"]]
  [1m[36mTRANSACTION (21.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCosts (20220627101622)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (49.4ms)[0m  [1m[35mCREATE TABLE "costs" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "amount" integer DEFAULT 0, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_27278fdb3e"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (40.6ms)[0m  [1m[35mCREATE INDEX "index_costs_on_agency_id" ON "costs" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627101622"]]
  [1m[36mTRANSACTION (21.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSendings (20220627155404)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (104.2ms)[0m  [1m[35mCREATE TABLE "sendings" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "sender" character varying, "receiver" character varying, "amount" character varying, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8208376499"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (40.2ms)[0m  [1m[35mCREATE INDEX "index_sendings_on_agency_id" ON "sendings" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627155404"]]
  [1m[36mTRANSACTION (20.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateWithdrawals (20220627160105)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (101.8ms)[0m  [1m[35mCREATE TABLE "withdrawals" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_b59e4e9bec"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (42.4ms)[0m  [1m[35mCREATE INDEX "index_withdrawals_on_agency_id" ON "withdrawals" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627160105"]]
  [1m[36mTRANSACTION (19.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-06-28 15:33:06.838494"], ["updated_at", "2022-06-28 15:33:06.838494"]]
  [1m[36mTRANSACTION (4.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(5765488955715387570)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mCost Load (41.2ms)[0m  [1m[34mSELECT "costs".* FROM "costs" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCost Load (0.5ms)[0m  [1m[34mSELECT "costs".* FROM "costs" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mAgency Load (39.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mAgency Load (0.8ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mAgency Load (0.7ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mAgency Load (0.7ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[35m (14.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (456.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_development"[0m
  [1m[35m (293.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_test"[0m
  [1m[35m (1544.6ms)[0m  [1m[35mCREATE DATABASE "money_tf_development" ENCODING = 'unicode'[0m
  [1m[35m (883.6ms)[0m  [1m[35mCREATE DATABASE "money_tf_test" ENCODING = 'unicode'[0m
  [1m[35m (127.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (104.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5765488955715387570)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to EnablePgCrypto (20220623113514)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (141.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto"[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220623113514"]]
  [1m[36mTRANSACTION (12.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20220627100927)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (55.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "number" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627100927"]]
  [1m[36mTRANSACTION (21.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateWallets (20220627101129)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (48.4ms)[0m  [1m[35mCREATE TABLE "wallets" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "user_id" uuid NOT NULL, "balance" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_732f6628c4"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (54.1ms)[0m  [1m[35mCREATE INDEX "index_wallets_on_user_id" ON "wallets" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627101129"]]
  [1m[36mTRANSACTION (5.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAgencies (20220627101239)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (43.4ms)[0m  [1m[35mCREATE TABLE "agencies" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "balance" integer DEFAULT 0, "fee" integer DEFAULT 0, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627101239"]]
  [1m[36mTRANSACTION (20.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCosts (20220627101622)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (50.6ms)[0m  [1m[35mCREATE TABLE "costs" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "amount" integer DEFAULT 0, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_27278fdb3e"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (62.9ms)[0m  [1m[35mCREATE INDEX "index_costs_on_agency_id" ON "costs" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627101622"]]
  [1m[36mTRANSACTION (5.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSendings (20220627155404)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (94.1ms)[0m  [1m[35mCREATE TABLE "sendings" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "sender" character varying, "receiver" character varying, "amount" character varying, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8208376499"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (48.2ms)[0m  [1m[35mCREATE INDEX "index_sendings_on_agency_id" ON "sendings" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627155404"]]
  [1m[36mTRANSACTION (18.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateWithdrawals (20220627160105)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (86.6ms)[0m  [1m[35mCREATE TABLE "withdrawals" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_b59e4e9bec"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (48.5ms)[0m  [1m[35mCREATE INDEX "index_withdrawals_on_agency_id" ON "withdrawals" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627160105"]]
  [1m[36mTRANSACTION (17.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-06-28 15:39:46.904250"], ["updated_at", "2022-06-28 15:39:46.904250"]]
  [1m[36mTRANSACTION (10.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(5765488955715387570)[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAgency Create (1099.7ms)[0m  [1m[32mINSERT INTO "agencies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2022-06-28 15:40:32.395799"], ["updated_at", "2022-06-28 15:40:32.395799"]]
  [1m[36mTRANSACTION (81.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mAgency Load (0.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCost Load (31.4ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e44d2c2-c955-48c3-8a09-8eceb0398f4d"], ["LIMIT", 1]]
  [1m[36mCost Load (0.2ms)[0m  [1m[34mSELECT "costs".* FROM "costs" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAgency Load (0.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e44d2c2-c955-48c3-8a09-8eceb0398f4d"], ["LIMIT", 1]]
  [1m[36mCost Create (22.3ms)[0m  [1m[32mINSERT INTO "costs" ("agency_id", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["agency_id", "1e44d2c2-c955-48c3-8a09-8eceb0398f4d"], ["amount", 500], ["created_at", "2022-06-28 15:41:34.551180"], ["updated_at", "2022-06-28 15:41:34.551180"]]
  [1m[36mTRANSACTION (168.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCost Load (0.5ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["agency_id", "1e44d2c2-c955-48c3-8a09-8eceb0398f4d"], ["LIMIT", 11]]
  [1m[36mCost Load (0.4ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["agency_id", "1e44d2c2-c955-48c3-8a09-8eceb0398f4d"], ["LIMIT", 11]]
  [1m[36mCost Load (0.5ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["agency_id", "1e44d2c2-c955-48c3-8a09-8eceb0398f4d"], ["LIMIT", 11]]
  [1m[36mCost Load (0.5ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["agency_id", "1e44d2c2-c955-48c3-8a09-8eceb0398f4d"], ["LIMIT", 11]]
  [1m[36mCost Load (4.2ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["agency_id", "1e44d2c2-c955-48c3-8a09-8eceb0398f4d"], ["LIMIT", 11]]
  [1m[36mCost Load (0.6ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1[0m  [["agency_id", "1e44d2c2-c955-48c3-8a09-8eceb0398f4d"]]
  [1m[35m (25.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (325.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_development"[0m
  [1m[35m (292.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_test"[0m
  [1m[35m (1632.9ms)[0m  [1m[35mCREATE DATABASE "money_tf_development" ENCODING = 'unicode'[0m
  [1m[35m (1996.4ms)[0m  [1m[35mCREATE DATABASE "money_tf_test" ENCODING = 'unicode'[0m
  [1m[35m (1360.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (391.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5765488955715387570)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to EnablePgCrypto (20220623113514)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1531.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto"[0m
  [1m[36mActiveRecord::SchemaMigration Create (30.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220623113514"]]
  [1m[36mTRANSACTION (187.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20220627100927)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (81.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "number" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627100927"]]
  [1m[36mTRANSACTION (51.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateWallets (20220627101129)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (74.0ms)[0m  [1m[35mCREATE TABLE "wallets" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "user_id" uuid NOT NULL, "balance" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_732f6628c4"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (87.6ms)[0m  [1m[35mCREATE INDEX "index_wallets_on_user_id" ON "wallets" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627101129"]]
  [1m[36mTRANSACTION (26.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAgencies (20220627101239)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (91.5ms)[0m  [1m[35mCREATE TABLE "agencies" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "balance" integer DEFAULT 0, "fee" integer DEFAULT 0, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627101239"]]
  [1m[36mTRANSACTION (16.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCosts (20220627101622)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (64.0ms)[0m  [1m[35mCREATE TABLE "costs" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "amount" integer DEFAULT 0, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_27278fdb3e"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (48.7ms)[0m  [1m[35mCREATE INDEX "index_costs_on_agency_id" ON "costs" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627101622"]]
  [1m[36mTRANSACTION (21.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSendings (20220627155404)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (102.0ms)[0m  [1m[35mCREATE TABLE "sendings" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "sender" character varying, "receiver" character varying, "amount" character varying, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8208376499"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (51.2ms)[0m  [1m[35mCREATE INDEX "index_sendings_on_agency_id" ON "sendings" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627155404"]]
  [1m[36mTRANSACTION (22.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateWithdrawals (20220627160105)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (117.9ms)[0m  [1m[35mCREATE TABLE "withdrawals" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_b59e4e9bec"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (44.6ms)[0m  [1m[35mCREATE INDEX "index_withdrawals_on_agency_id" ON "withdrawals" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627160105"]]
  [1m[36mTRANSACTION (17.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-06-28 17:47:36.645698"], ["updated_at", "2022-06-28 17:47:36.645698"]]
  [1m[36mTRANSACTION (16.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(5765488955715387570)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAgency Create (85.6ms)[0m  [1m[32mINSERT INTO "agencies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2022-06-28 17:54:20.973959"], ["updated_at", "2022-06-28 17:54:20.973959"]]
  [1m[36mTRANSACTION (23.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCost Load (32.9ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "2c22c695-cb8e-4aae-88ef-8141f808fb18"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAgency Load (0.4ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "2c22c695-cb8e-4aae-88ef-8141f808fb18"], ["LIMIT", 1]]
  [1m[36mCost Create (90.4ms)[0m  [1m[32mINSERT INTO "costs" ("agency_id", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["agency_id", "2c22c695-cb8e-4aae-88ef-8141f808fb18"], ["amount", 500], ["created_at", "2022-06-28 18:00:36.457765"], ["updated_at", "2022-06-28 18:00:36.457765"]]
  [1m[36mTRANSACTION (85.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCost Load (0.3ms)[0m  [1m[34mSELECT "costs".* FROM "costs" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (9.7ms)[0m  [1m[32mINSERT INTO "users" ("number", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["number", 1122334455], ["created_at", "2022-06-28 18:07:43.898638"], ["updated_at", "2022-06-28 18:07:43.898638"]]
  [1m[36mTRANSACTION (26.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "2780c94c-00c7-43f5-88ed-07c1be17893c"], ["LIMIT", 1]]
  [1m[36mWallet Create (15.4ms)[0m  [1m[32mINSERT INTO "wallets" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", "2780c94c-00c7-43f5-88ed-07c1be17893c"], ["created_at", "2022-06-28 18:08:11.898336"], ["updated_at", "2022-06-28 18:08:11.898336"]]
  [1m[36mTRANSACTION (25.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mWallet Load (1.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" ORDER BY "wallets"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (98.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", "2780c94c-00c7-43f5-88ed-07c1be17893c"], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "2780c94c-00c7-43f5-88ed-07c1be17893c"], ["LIMIT", 1]]
  [1m[36mCost Load (0.5ms)[0m  [1m[34mSELECT "costs".* FROM "costs" ORDER BY "costs"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAgency Load (0.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" ORDER BY "agencies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAgency Load (0.4ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "2c22c695-cb8e-4aae-88ef-8141f808fb18"], ["LIMIT", 1]]
  [1m[36mCost Load (0.3ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "2c22c695-cb8e-4aae-88ef-8141f808fb18"], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mWallet Load (0.5ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", "2780c94c-00c7-43f5-88ed-07c1be17893c"], ["LIMIT", 1]]
  [1m[35m (83.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (57.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (1088.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_development"[0m
  [1m[35m (711.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_test"[0m
  [1m[35m (1535.2ms)[0m  [1m[35mCREATE DATABASE "money_tf_development" ENCODING = 'unicode'[0m
  [1m[35m (835.6ms)[0m  [1m[35mCREATE DATABASE "money_tf_test" ENCODING = 'unicode'[0m
  [1m[35m (525.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (123.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5765488955715387570)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to EnablePgCrypto (20220623113514)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (442.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto"[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220623113514"]]
  [1m[36mTRANSACTION (25.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20220627100927)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (143.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "number" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627100927"]]
  [1m[36mTRANSACTION (21.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateWallets (20220627101129)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (90.8ms)[0m  [1m[35mCREATE TABLE "wallets" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "user_id" uuid NOT NULL, "balance" integer DEFAULT 0, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_732f6628c4"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (38.9ms)[0m  [1m[35mCREATE INDEX "index_wallets_on_user_id" ON "wallets" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627101129"]]
  [1m[36mTRANSACTION (22.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAgencies (20220627101239)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (96.6ms)[0m  [1m[35mCREATE TABLE "agencies" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627101239"]]
  [1m[36mTRANSACTION (21.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCosts (20220627101622)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (50.0ms)[0m  [1m[35mCREATE TABLE "costs" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "amount" integer DEFAULT 0, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_27278fdb3e"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (40.6ms)[0m  [1m[35mCREATE INDEX "index_costs_on_agency_id" ON "costs" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627101622"]]
  [1m[36mTRANSACTION (20.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSendings (20220627155404)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (107.0ms)[0m  [1m[35mCREATE TABLE "sendings" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "sender" character varying, "receiver" character varying, "amount" character varying, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8208376499"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (40.6ms)[0m  [1m[35mCREATE INDEX "index_sendings_on_agency_id" ON "sendings" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627155404"]]
  [1m[36mTRANSACTION (20.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateWithdrawals (20220627160105)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (104.7ms)[0m  [1m[35mCREATE TABLE "withdrawals" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_b59e4e9bec"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (35.6ms)[0m  [1m[35mCREATE INDEX "index_withdrawals_on_agency_id" ON "withdrawals" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220627160105"]]
  [1m[36mTRANSACTION (19.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20220629090430)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (47.2ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "balance" integer DEFAULT 0, "fee" integer DEFAULT 0, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_3727d03534"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (40.5ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_agency_id" ON "accounts" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629090430"]]
  [1m[36mTRANSACTION (16.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-06-29 09:25:32.205080"], ["updated_at", "2022-06-29 09:25:32.205080"]]
  [1m[36mTRANSACTION (28.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(5765488955715387570)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/users" for ::1 at 2022-06-29 09:26:26 +0000
  [1m[35m (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#index as */*
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:4:in `index'
Completed 200 OK in 168ms (Views: 7.3ms | ActiveRecord: 8.4ms | Allocations: 4217)


Started POST "/users/create" for ::1 at 2022-06-29 09:40:35 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Jean", "number"=>1122334455}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 1ms (Allocations: 404)


  
ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  
actionpack (6.1.6) lib/action_controller/metal/request_forgery_protection.rb:211:in `handle_unverified_request'
actionpack (6.1.6) lib/action_controller/metal/request_forgery_protection.rb:243:in `handle_unverified_request'
actionpack (6.1.6) lib/action_controller/metal/request_forgery_protection.rb:238:in `verify_authenticity_token'
activesupport (6.1.6) lib/active_support/callbacks.rb:427:in `block in make_lambda'
activesupport (6.1.6) lib/active_support/callbacks.rb:198:in `block (2 levels) in halting'
actionpack (6.1.6) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.1.6) lib/active_support/callbacks.rb:199:in `block in halting'
activesupport (6.1.6) lib/active_support/callbacks.rb:512:in `block in invoke_before'
activesupport (6.1.6) lib/active_support/callbacks.rb:512:in `each'
activesupport (6.1.6) lib/active_support/callbacks.rb:512:in `invoke_before'
activesupport (6.1.6) lib/active_support/callbacks.rb:115:in `block in run_callbacks'
activesupport (6.1.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
rack (2.2.3.1) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3.1) lib/rack/etag.rb:27:in `call'
rack (2.2.3.1) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3.1) lib/rack/head.rb:12:in `call'
actionpack (6.1.6) lib/action_dispatch/http/permissions_policy.rb:22:in `call'
actionpack (6.1.6) lib/action_dispatch/http/content_security_policy.rb:19:in `call'
rack (2.2.3.1) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3.1) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (6.1.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.6) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.3.1) lib/rack/method_override.rb:24:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-mini-profiler (2.3.4) lib/mini_profiler/profiler.rb:393:in `call'
webpacker (5.4.3) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.7.2) lib/rack/proxy.rb:67:in `call'
railties (6.1.6) lib/rails/engine.rb:539:in `call'
puma (5.6.4) lib/puma/configuration.rb:252:in `call'
puma (5.6.4) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.4) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.4) lib/puma/request.rb:76:in `handle_request'
puma (5.6.4) lib/puma/server.rb:441:in `process_client'
puma (5.6.4) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started POST "/users/create" for ::1 at 2022-06-29 09:42:15 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Jean", "number"=>1122334455}}
Completed 500 Internal Server Error in 13ms (Allocations: 3736)


  
NoMethodError (undefined method `create_user' for User (call 'User.connection' to establish a connection):Class
Did you mean?  create):
  
app/controllers/users_controller.rb:8:in `create'
Started POST "/users/create" for ::1 at 2022-06-29 09:42:59 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Jean", "number"=>1122334455}}
Completed 500 Internal Server Error in 250ms (ActiveRecord: 188.6ms | Allocations: 9945)


  
ActiveModel::UnknownAttributeError (unknown attribute 'user_params' for User.):
  
app/controllers/users_controller.rb:8:in `create'
Started POST "/users/create" for ::1 at 2022-06-29 10:04:03 +0000
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Jean", "number"=>1122334455}}
Completed 500 Internal Server Error in 34ms (ActiveRecord: 0.0ms | Allocations: 1285)


  
RuntimeError (#<ActionController::Parameters {"user"=>{"name"=>"Jean", "number"=>1122334455}, "controller"=>"users", "action"=>"create"} permitted: false>):
  
app/controllers/users_controller.rb:8:in `create'
Started POST "/users/create" for ::1 at 2022-06-29 10:05:26 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Jean", "number"=>1122334455}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 560)


  
RuntimeError (#<ActionController::Parameters {"name"=>"Jean", "number"=>1122334455} permitted: true>):
  
app/controllers/users_controller.rb:8:in `create'
Started POST "/users/create" for ::1 at 2022-06-29 10:05:56 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Jean", "number"=>1122334455}}
Completed 500 Internal Server Error in 38ms (ActiveRecord: 0.0ms | Allocations: 5429)


  
NoMethodError (undefined method `create_one' for #<Class:0x00007f70e520cad0>
Did you mean?  create):
  
app/controllers/users_controller.rb:9:in `create'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (14.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (97.8ms)[0m  [1m[32mINSERT INTO "users" ("name", "number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Jean"], ["number", 1122334455], ["created_at", "2022-06-29 10:08:12.712395"], ["updated_at", "2022-06-29 10:08:12.712395"]]
  [1m[36mTRANSACTION (17.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mWallet Load (20.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", "7a88a3e2-93d3-4d1f-b87e-72c3e76477d9"], ["LIMIT", 1]]
Started POST "/users/create" for ::1 at 2022-06-29 10:10:40 +0000
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Marion", "number"=>1222334455}}
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:9:in `block in create'
  [1m[36mUser Create (33.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Marion"], ["number", 1222334455], ["created_at", "2022-06-29 10:10:42.909064"], ["updated_at", "2022-06-29 10:10:42.909064"]]
  â†³ app/controllers/users_controller.rb:9:in `block in create'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "067cad14-7039-41be-be3c-cdffb4c8f247"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:10:in `block in create'
  [1m[36mWallet Create (16.3ms)[0m  [1m[32mINSERT INTO "wallets" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", "067cad14-7039-41be-be3c-cdffb4c8f247"], ["created_at", "2022-06-29 10:10:43.051418"], ["updated_at", "2022-06-29 10:10:43.051418"]]
  â†³ app/controllers/users_controller.rb:10:in `block in create'
  [1m[36mTRANSACTION (15.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:8:in `create'
Completed 500 Internal Server Error in 254ms (ActiveRecord: 83.4ms | Allocations: 20676)


  
NameError (undefined local variable or method `user' for #<UsersController:0x00000000008c50>
Did you mean?  super):
  
app/controllers/users_controller.rb:13:in `create'
Started GET "/users" for ::1 at 2022-06-29 10:11:09 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:4:in `index'
Completed 200 OK in 8ms (Views: 5.0ms | ActiveRecord: 1.8ms | Allocations: 2110)


  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."name" = $1 /* loading for inspect */ LIMIT $2[0m  [["name", "Marion"], ["LIMIT", 11]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."name" = $1 /* loading for inspect */ LIMIT $2[0m  [["name", "Marion"], ["LIMIT", 11]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" ORDER BY "wallets"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "067cad14-7039-41be-be3c-cdffb4c8f247"], ["LIMIT", 1]]
  [1m[36mUser Destroy (22.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mUser Destroy (2.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mWallet Destroy (21.4ms)[0m  [1m[31mDELETE FROM "wallets"[0m
  [1m[36mUser Destroy (22.0ms)[0m  [1m[31mDELETE FROM "users"[0m
Started GET "/users" for ::1 at 2022-06-29 10:14:00 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:4:in `index'
Completed 200 OK in 9ms (Views: 3.8ms | ActiveRecord: 3.8ms | Allocations: 3164)


Started POST "/users/create" for ::1 at 2022-06-29 10:14:09 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Marion", "number"=>1122334455}}
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:9:in `block in create'
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Marion"], ["number", 1122334455], ["created_at", "2022-06-29 10:14:09.755846"], ["updated_at", "2022-06-29 10:14:09.755846"]]
  â†³ app/controllers/users_controller.rb:9:in `block in create'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "7a942bc3-6e66-410d-bee3-4de96e11fa11"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:10:in `block in create'
  [1m[36mWallet Create (2.1ms)[0m  [1m[32mINSERT INTO "wallets" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", "7a942bc3-6e66-410d-bee3-4de96e11fa11"], ["created_at", "2022-06-29 10:14:09.778323"], ["updated_at", "2022-06-29 10:14:09.778323"]]
  â†³ app/controllers/users_controller.rb:10:in `block in create'
  [1m[36mTRANSACTION (36.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:8:in `create'
Completed 500 Internal Server Error in 91ms (ActiveRecord: 56.8ms | Allocations: 17026)


  
NameError (undefined local variable or method `user' for #<UsersController:0x0000000000a410>
Did you mean?  super):
  
app/controllers/users_controller.rb:13:in `create'
Started POST "/users/create" for ::1 at 2022-06-29 10:16:09 +0000
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Error occurred while parsing request parameters.
Contents:

{
    "user": {
        "name": "Jean",
        "number": 0102030405
    }
}
Processing by UsersController#create as */*
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms | Allocations: 799)


  
ActionDispatch::Http::Parameters::ParseError (783: unexpected token at '{
    "user": {
        "name": "Jean",
        "number": 0102030405
    }
}'):
  
app/controllers/users_controller.rb:18:in `user_params'
app/controllers/users_controller.rb:8:in `create'
Started GET "/users" for ::1 at 2022-06-29 10:16:17 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:4:in `index'
Completed 200 OK in 53ms (Views: 35.9ms | ActiveRecord: 15.7ms | Allocations: 5086)


  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", "7a942bc3-6e66-410d-bee3-4de96e11fa11"], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2022-06-29 10:26:48 +0000
  [1m[35m (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering .vendor/ruby/2.7.0/gems/railties-6.1.6/lib/rails/templates/rails/welcome/index.html.erb
  Rendered .vendor/ruby/2.7.0/gems/railties-6.1.6/lib/rails/templates/rails/welcome/index.html.erb (Duration: 45.3ms | Allocations: 224)
Completed 200 OK in 73ms (Views: 48.3ms | ActiveRecord: 0.0ms | Allocations: 933)


Started GET "/agencies" for ::1 at 2022-06-29 10:29:26 +0000
Processing by AgenciesController#index as */*
  [1m[36mAgency Load (11.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies"[0m
  â†³ app/controllers/agencies_controller.rb:4:in `index'
Completed 200 OK in 138ms (Views: 5.0ms | ActiveRecord: 16.8ms | Allocations: 4612)


Started GET "/users" for ::1 at 2022-06-29 10:29:31 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:4:in `index'
Completed 200 OK in 43ms (Views: 13.1ms | ActiveRecord: 1.9ms | Allocations: 4100)


  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mWallet Load (0.7ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets"[0m
Started GET "/users" for ::1 at 2022-06-29 12:05:44 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:4:in `index'
Completed 200 OK in 509ms (Views: 394.7ms | ActiveRecord: 249.6ms | Allocations: 10786)


  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (1603.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_development"[0m
  [1m[35m (577.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_test"[0m
  [1m[35m (1571.7ms)[0m  [1m[35mCREATE DATABASE "money_tf_development" ENCODING = 'unicode'[0m
  [1m[35m (882.6ms)[0m  [1m[35mCREATE DATABASE "money_tf_test" ENCODING = 'unicode'[0m
  [1m[35m (633.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (229.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5765488955715387570)[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to EnablePgCrypto (20220623113514)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (388.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto"[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220623113514"]]
  [1m[36mTRANSACTION (22.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20220629140930)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (123.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "number" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629140930"]]
  [1m[36mTRANSACTION (16.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAgencies (20220629141040)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (81.1ms)[0m  [1m[35mCREATE TABLE "agencies" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141040"]]
  [1m[36mTRANSACTION (17.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCosts (20220629141113)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (80.5ms)[0m  [1m[35mCREATE TABLE "costs" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "amount" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_27278fdb3e"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (50.1ms)[0m  [1m[35mCREATE INDEX "index_costs_on_agency_id" ON "costs" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141113"]]
  [1m[36mTRANSACTION (15.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUserTransactions (20220629141348)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (108.0ms)[0m  [1m[35mCREATE TABLE "user_transactions" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "type_of" integer, "sender_id" uuid, "receiver_id" uuid, "amount" character varying, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_e17aaf1d6e"
FOREIGN KEY ("sender_id")
  REFERENCES "user" ("id")
, CONSTRAINT "fk_rails_d80181d2f2"
FOREIGN KEY ("receiver_id")
  REFERENCES "user" ("id")
)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(5765488955715387570)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5765488955715387570)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUserTransactions (20220629141348)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (146.3ms)[0m  [1m[35mCREATE TABLE "user_transactions" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "type_of" integer, "sender_id" uuid, "receiver_id" uuid, "amount" character varying, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_e17aaf1d6e"
FOREIGN KEY ("sender_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_d80181d2f2"
FOREIGN KEY ("receiver_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (39.8ms)[0m  [1m[35mCREATE INDEX "index_user_transactions_on_sender_id" ON "user_transactions" ("sender_id")[0m
  [1m[35m (41.0ms)[0m  [1m[35mCREATE INDEX "index_user_transactions_on_receiver_id" ON "user_transactions" ("receiver_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141348"]]
  [1m[36mTRANSACTION (16.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAgencyTransactions (20220629141547)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (144.7ms)[0m  [1m[35mCREATE TABLE "agency_transactions" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "type_of" integer, "sender" character varying, "receiver" character varying, "amount" integer, "fee" integer DEFAULT 0, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f21bb2ac60"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (40.5ms)[0m  [1m[35mCREATE INDEX "index_agency_transactions_on_agency_id" ON "agency_transactions" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141547"]]
  [1m[36mTRANSACTION (16.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (15.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-06-29 14:36:39.231863"], ["updated_at", "2022-06-29 14:36:39.231863"]]
  [1m[36mTRANSACTION (24.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(5765488955715387570)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAgency Create (79.6ms)[0m  [1m[32mINSERT INTO "agencies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Dudu Agence"], ["created_at", "2022-06-29 14:39:03.386185"], ["updated_at", "2022-06-29 14:39:03.386185"]]
  [1m[36mTRANSACTION (16.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mAgencyTransaction Load (35.7ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["agency_id", "6b718d6a-cca2-4746-be72-aaba8f24bb70"], ["LIMIT", 11]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (174.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Jean"], ["number", "0102030405"], ["created_at", "2022-06-29 14:40:18.440088"], ["updated_at", "2022-06-29 14:40:18.440088"]]
  [1m[36mTRANSACTION (91.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5765488955715387570)[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(5765488955715387570)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5765488955715387570)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateAgencyTransactions (20220629141547)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (77.8ms)[0m  [1m[35mDROP TABLE "agency_transactions"[0m
  [1m[36mActiveRecord::SchemaMigration Destroy (1.0ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20220629141547"]]
  [1m[36mTRANSACTION (19.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(5765488955715387570)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5765488955715387570)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUserTransactions (20220629141348)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE "user_transactions"[0m
  [1m[36mActiveRecord::SchemaMigration Destroy (0.5ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20220629141348"]]
  [1m[36mTRANSACTION (18.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_advisory_unlock(5765488955715387570)[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5765488955715387570)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUserTransactions (20220629141348)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (139.7ms)[0m  [1m[35mCREATE TABLE "user_transactions" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "user_id" uuid, "type_of" integer, "receiver_id" uuid, "amount" character varying, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_e0527492c6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_d80181d2f2"
FOREIGN KEY ("receiver_id")
  REFERENCES "user" ("id")
)[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(5765488955715387570)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (365.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_development"[0m
  [1m[35m (293.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_test"[0m
  [1m[35m (2292.4ms)[0m  [1m[35mCREATE DATABASE "money_tf_development" ENCODING = 'unicode'[0m
  [1m[35m (831.3ms)[0m  [1m[35mCREATE DATABASE "money_tf_test" ENCODING = 'unicode'[0m
  [1m[35m (140.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (112.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5765488955715387570)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to EnablePgCrypto (20220623113514)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (102.6ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto"[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220623113514"]]
  [1m[36mTRANSACTION (14.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20220629140930)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (91.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "number" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629140930"]]
  [1m[36mTRANSACTION (16.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAgencies (20220629141040)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (163.4ms)[0m  [1m[35mCREATE TABLE "agencies" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141040"]]
  [1m[36mTRANSACTION (63.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCosts (20220629141113)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (61.7ms)[0m  [1m[35mCREATE TABLE "costs" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "amount" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_27278fdb3e"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (76.8ms)[0m  [1m[35mCREATE INDEX "index_costs_on_agency_id" ON "costs" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141113"]]
  [1m[36mTRANSACTION (18.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUserTransactions (20220629141348)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (94.0ms)[0m  [1m[35mCREATE TABLE "user_transactions" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "user_id" uuid, "type_of" integer, "receiver_id" uuid, "amount" character varying, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_e0527492c6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_d80181d2f2"
FOREIGN KEY ("receiver_id")
  REFERENCES "user" ("id")
)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(5765488955715387570)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5765488955715387570)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUserTransactions (20220629141348)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (112.3ms)[0m  [1m[35mCREATE TABLE "user_transactions" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "user_id" uuid, "type_of" integer, "receiver_id" uuid, "amount" character varying, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_e0527492c6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_d80181d2f2"
FOREIGN KEY ("receiver_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (46.8ms)[0m  [1m[35mCREATE INDEX "index_user_transactions_on_user_id" ON "user_transactions" ("user_id")[0m
  [1m[35m (67.3ms)[0m  [1m[35mCREATE INDEX "index_user_transactions_on_receiver_id" ON "user_transactions" ("receiver_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141348"]]
  [1m[36mTRANSACTION (20.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAgencyTransactions (20220629141547)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (93.9ms)[0m  [1m[35mCREATE TABLE "agency_transactions" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "type_of" integer, "sender" character varying, "receiver" character varying, "amount" integer, "fee" integer DEFAULT 0, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f21bb2ac60"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (47.9ms)[0m  [1m[35mCREATE INDEX "index_agency_transactions_on_agency_id" ON "agency_transactions" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141547"]]
  [1m[36mTRANSACTION (28.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-06-29 14:44:06.322413"], ["updated_at", "2022-06-29 14:44:06.322413"]]
  [1m[36mTRANSACTION (10.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(5765488955715387570)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/agencies" for ::1 at 2022-06-29 14:49:28 +0000
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AgenciesController#index as */*
  [1m[36mAgency Load (23.6ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies"[0m
  â†³ app/controllers/agencies_controller.rb:4:in `index'
Completed 200 OK in 66ms (Views: 2.8ms | ActiveRecord: 23.6ms | Allocations: 2413)


Started GET "/users" for ::1 at 2022-06-29 14:49:33 +0000
  
NameError (uninitialized constant Applcation
Did you mean?  ApplicationCable):
  
app/controllers/users_controller.rb:1:in `<main>'
Started GET "/users" for ::1 at 2022-06-29 14:49:58 +0000
  
SyntaxError (/home/mederic/formation_others/money_tf/app/controllers/users_controller.rb:5: syntax error, unexpected `end', expecting end-of-input):
  
app/controllers/users_controller.rb:5: syntax error, unexpected `end', expecting end-of-input
app/controllers/users_controller.rb:5: syntax error, unexpected `end', expecting end-of-input
app/controllers/users_controller.rb:5: syntax error, unexpected `end', expecting end-of-input
Started GET "/users" for ::1 at 2022-06-29 14:50:30 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (100.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:5:in `index'
Completed 200 OK in 713ms (Views: 4.9ms | ActiveRecord: 584.9ms | Allocations: 3410)


Started POST "/users/create" for ::1 at 2022-06-29 14:53:09 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Jean", "number"=>"0102030405"}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 487)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/controllers/users_controller.rb:17:in `user_params'
app/controllers/users_controller.rb:9:in `create'
Started POST "/users/create" for ::1 at 2022-06-29 14:55:02 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Jean", "number"=>"0102030405"}}
Completed 500 Internal Server Error in 152ms (ActiveRecord: 144.3ms | Allocations: 4594)


  
ActiveModel::UnknownAttributeError (unknown attribute 'user_params' for User.):
  
app/controllers/users_controller.rb:9:in `create'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
Started POST "/users/create" for ::1 at 2022-06-29 14:57:26 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Jean", "number"=>"0102030405"}}
Completed 500 Internal Server Error in 23ms (ActiveRecord: 13.7ms | Allocations: 4572)


  
ActiveModel::UnknownAttributeError (unknown attribute 'user_params' for User.):
  
app/controllers/users_controller.rb:9:in `create'
Started POST "/users/create" for ::1 at 2022-06-29 14:57:43 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Jean", "number"=>"0102030405"}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 528)


  
RuntimeError (#<ActionController::Parameters {"name"=>"Jean", "number"=>"0102030405"} permitted: true>):
  
app/controllers/users_controller.rb:9:in `create'
Started POST "/users/create" for ::1 at 2022-06-29 14:58:01 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Jean", "number"=>"0102030405"}}
Completed 500 Internal Server Error in 18ms (ActiveRecord: 8.3ms | Allocations: 4562)


  
ActiveModel::UnknownAttributeError (unknown attribute 'user_params' for User.):
  
app/controllers/users_controller.rb:10:in `create'
Started POST "/users/create" for ::1 at 2022-06-29 14:59:35 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Jean", "number"=>"0102030405"}}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Create (119.7ms)[0m  [1m[32mINSERT INTO "users" ("name", "number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Jean"], ["number", "0102030405"], ["created_at", "2022-06-29 14:59:35.799413"], ["updated_at", "2022-06-29 14:59:35.799413"]]
  â†³ app/controllers/users_controller.rb:11:in `create'
  [1m[36mTRANSACTION (14.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:11:in `create'
Completed 200 OK in 165ms (Views: 0.6ms | ActiveRecord: 147.6ms | Allocations: 7708)


Started GET "/users" for ::1 at 2022-06-29 14:59:46 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:5:in `index'
Completed 200 OK in 6ms (Views: 3.6ms | ActiveRecord: 1.6ms | Allocations: 1849)


  [1m[36mUser Load (21.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (25.1ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserTransaction Load (0.5ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 11]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserTransaction Create (81.5ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["amount", "500"], ["created_at", "2022-06-29 15:14:34.030841"], ["updated_at", "2022-06-29 15:14:34.030841"]]
  [1m[36mTRANSACTION (23.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  [1m[36mUserTransaction Load (0.5ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 11]]
  [1m[36mUserTransaction Load (0.2ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
Started GET "/users" for ::1 at 2022-06-29 15:16:56 +0000
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#index as */*
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:5:in `index'
Completed 200 OK in 34ms (Views: 5.8ms | ActiveRecord: 2.0ms | Allocations: 4168)


Started GET "/user/sold" for ::1 at 2022-06-29 15:25:56 +0000
  
ActionController::RoutingError (No route matches [GET] "/user/sold"):
  
Started GET "/user/sold" for ::1 at 2022-06-29 15:26:34 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"}}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:30:in `user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:30:in `user'
Completed 500 Internal Server Error in 149ms (ActiveRecord: 130.8ms | Allocations: 11123)


  
RuntimeError (#<User id: "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f", name: "Jean", number: "0102030405", created_at: "2022-06-29 14:59:35.799413000 +0000", updated_at: "2022-06-29 14:59:35.799413000 +0000">):
  
app/controllers/users_controller.rb:17:in `sold'
Started GET "/user/sold" for ::1 at 2022-06-29 15:26:53 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"}}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:30:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:30:in `user'
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 500 Internal Server Error in 99ms (ActiveRecord: 20.7ms | Allocations: 9790)


  
RuntimeError ("500"):
  
app/controllers/users_controller.rb:17:in `sold'
Started GET "/user/sold" for ::1 at 2022-06-29 15:27:54 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"}}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[35m (2.6ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 51ms (Views: 0.9ms | ActiveRecord: 16.6ms | Allocations: 9710)


Started GET "/user/sold" for ::1 at 2022-06-29 15:28:35 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"}}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:34:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:34:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:34:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:34:in `user'
  [1m[35m (2.0ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 40ms (Views: 0.5ms | ActiveRecord: 14.8ms | Allocations: 9685)


Started GET "/user/sold" for ::1 at 2022-06-29 15:28:56 +0000
Processing by UsersController#sold as */*
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms | Allocations: 537)


  
ActionController::ParameterMissing (param is missing or the value is empty: user
Did you mean?  controller
               action):
  
app/controllers/users_controller.rb:30:in `user_params'
app/controllers/users_controller.rb:34:in `user'
Started GET "/user/transactions" for ::1 at 2022-06-29 15:29:07 +0000
Processing by UsersController#transactions as */*
Completed 400 Bad Request in 2ms (ActiveRecord: 0.0ms | Allocations: 533)


  
ActionController::ParameterMissing (param is missing or the value is empty: user
Did you mean?  controller
               action):
  
app/controllers/users_controller.rb:30:in `user_params'
app/controllers/users_controller.rb:34:in `user'
app/controllers/users_controller.rb:23:in `transactions'
Started GET "/user/transactions" for ::1 at 2022-06-29 15:29:29 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"}}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:34:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:34:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:34:in `user'
  [1m[36mUserTransaction Load (3.4ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/controllers/users_controller.rb:24:in `transactions'
Completed 200 OK in 44ms (Views: 24.7ms | ActiveRecord: 11.3ms | Allocations: 8078)


Started GET "/user/sold" for ::1 at 2022-06-29 15:30:34 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"}}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 78ms (Views: 0.5ms | ActiveRecord: 32.9ms | Allocations: 9688)


Started POST "/agencies/create" for ::1 at 2022-06-29 15:42:57 +0000
Processing by AgenciesController#create as */*
  Parameters: {"agency"=>{"name"=>"Dudu agency", "cost"=>500}}
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/agencies_controller.rb:9:in `create'
  [1m[36mAgency Create (31.8ms)[0m  [1m[32mINSERT INTO "agencies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Dudu agency"], ["created_at", "2022-06-29 15:42:58.392113"], ["updated_at", "2022-06-29 15:42:58.392113"]]
  â†³ app/controllers/agencies_controller.rb:9:in `create'
  [1m[36mTRANSACTION (19.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/agencies_controller.rb:9:in `create'
Completed 500 Internal Server Error in 217ms (ActiveRecord: 140.6ms | Allocations: 16674)


  
ActiveModel::UnknownAttributeError (unknown attribute 'ahency_id' for Cost.):
  
app/controllers/agencies_controller.rb:10:in `create'
  [1m[36mAgency Destroy (41.1ms)[0m  [1m[31mDELETE FROM "agencies"[0m
Started POST "/agencies/create" for ::1 at 2022-06-29 15:43:51 +0000
Processing by AgenciesController#create as */*
  Parameters: {"agency"=>{"name"=>"Dudu agency", "cost"=>500}}
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/agencies_controller.rb:9:in `create'
  [1m[36mAgency Create (5.8ms)[0m  [1m[32mINSERT INTO "agencies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Dudu agency"], ["created_at", "2022-06-29 15:43:51.354582"], ["updated_at", "2022-06-29 15:43:51.354582"]]
  â†³ app/controllers/agencies_controller.rb:9:in `create'
  [1m[36mTRANSACTION (17.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/agencies_controller.rb:9:in `create'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/agencies_controller.rb:10:in `create'
  [1m[36mAgency Load (2.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "0fab1d1f-640e-451a-a18d-f7386a3c46e6"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:10:in `create'
  [1m[36mCost Create (4.5ms)[0m  [1m[32mINSERT INTO "costs" ("agency_id", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["agency_id", "0fab1d1f-640e-451a-a18d-f7386a3c46e6"], ["amount", 500], ["created_at", "2022-06-29 15:43:51.426881"], ["updated_at", "2022-06-29 15:43:51.426881"]]
  â†³ app/controllers/agencies_controller.rb:10:in `create'
  [1m[36mTRANSACTION (12.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/agencies_controller.rb:10:in `create'
Completed 500 Internal Server Error in 118ms (ActiveRecord: 63.6ms | Allocations: 20279)


  
NameError (undefined local variable or method `agencies' for #<AgenciesController:0x00000000021638>
Did you mean?  agencies_url):
  
app/controllers/agencies_controller.rb:11:in `create'
Started GET "/agencies" for ::1 at 2022-06-29 15:44:05 +0000
Processing by AgenciesController#index as */*
  [1m[36mAgency Load (3.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies"[0m
  â†³ app/controllers/agencies_controller.rb:5:in `index'
Completed 200 OK in 31ms (Views: 13.0ms | ActiveRecord: 13.1ms | Allocations: 6155)


  [1m[36mAgency Load (0.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" ORDER BY "agencies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCost Load (0.5ms)[0m  [1m[34mSELECT "costs".* FROM "costs" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCost Load (0.4ms)[0m  [1m[34mSELECT "costs".* FROM "costs" ORDER BY "costs"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAgency Load (0.4ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "0fab1d1f-640e-451a-a18d-f7386a3c46e6"], ["LIMIT", 1]]
  [1m[36mAgency Load (0.6ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" ORDER BY "agencies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCost Load (0.4ms)[0m  [1m[34mSELECT "costs".* FROM "costs" ORDER BY "costs"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAgency Load (0.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "0fab1d1f-640e-451a-a18d-f7386a3c46e6"], ["LIMIT", 1]]
  [1m[36mCost Load (0.4ms)[0m  [1m[34mSELECT "costs".* FROM "costs" ORDER BY "costs"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAgency Load (1.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "0fab1d1f-640e-451a-a18d-f7386a3c46e6"], ["LIMIT", 1]]
  [1m[36mAgency Load (0.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" ORDER BY "agencies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCost Load (0.4ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "0fab1d1f-640e-451a-a18d-f7386a3c46e6"], ["LIMIT", 1]]
Started GET "/user/transactions" for ::1 at 2022-06-30 09:59:49 +0000
  [1m[35m (67.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
SyntaxError (/home/mederic/formation_others/money_tf/app/models/user.rb:27: syntax error, unexpected local variable or method, expecting ')'
      amount: new_amount,
      ^~~~~~
/home/mederic/formation_others/money_tf/app/models/user.rb:48: syntax error, unexpected end-of-input, expecting `end'):
  
app/models/user.rb:27: syntax error, unexpected local variable or method, expecting ')'
app/models/user.rb:48: syntax error, unexpected end-of-input, expecting `end'
app/models/user.rb:27: syntax error, unexpected local variable or method, expecting ')'
app/models/user.rb:48: syntax error, unexpected end-of-input, expecting `end'
app/models/user.rb:27: syntax error, unexpected local variable or method, expecting ')'
app/models/user.rb:48: syntax error, unexpected end-of-input, expecting `end'
Started GET "/user/transactions" for ::1 at 2022-06-30 10:00:23 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"}}
  [1m[36mUser Load (317.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:30:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:30:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:30:in `user'
  [1m[36mUserTransaction Load (86.3ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/controllers/users_controller.rb:21:in `transactions'
Completed 200 OK in 3439ms (Views: 291.9ms | ActiveRecord: 1220.7ms | Allocations: 18236)


Started GET "/user/sold" for ::1 at 2022-06-30 10:16:09 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"}}
  [1m[36mUser Load (28.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:30:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:30:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:30:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:30:in `user'
  [1m[35m (2.4ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 558ms (Views: 0.7ms | ActiveRecord: 170.6ms | Allocations: 10494)


Started GET "/agencies" for ::1 at 2022-06-30 10:16:57 +0000
Processing by AgenciesController#index as */*
  [1m[36mAgency Load (38.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies"[0m
  â†³ app/controllers/agencies_controller.rb:5:in `index'
Completed 200 OK in 122ms (Views: 10.4ms | ActiveRecord: 66.2ms | Allocations: 5725)


Started GET "/users" for ::1 at 2022-06-30 10:27:36 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 119ms (Views: 31.0ms | ActiveRecord: 16.4ms | Allocations: 11162)


  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  [1m[36mAgency Load (29.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" ORDER BY "agencies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCost Load (39.7ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "0fab1d1f-640e-451a-a18d-f7386a3c46e6"], ["LIMIT", 1]]
  [1m[36mAgency Load (0.2ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
Started GET "/users" for ::1 at 2022-06-30 13:32:50 +0000
  [1m[35m (55.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#index as */*
  [1m[36mUser Load (99.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 324ms (Views: 7.0ms | ActiveRecord: 154.2ms | Allocations: 7391)


Started GET "/users" for ::1 at 2022-06-30 17:40:42 +0000
  [1m[35m (34.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#index as */*
  [1m[36mUser Load (209.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 577ms (Views: 12.5ms | ActiveRecord: 275.4ms | Allocations: 7390)


Started POST "/users/create" for ::1 at 2022-06-30 17:42:23 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Albert", "number"=>"1122334455"}}
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Create (72.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Albert"], ["number", "1122334455"], ["created_at", "2022-06-30 17:42:23.833283"], ["updated_at", "2022-06-30 17:42:23.833283"]]
  â†³ app/controllers/users_controller.rb:11:in `create'
  [1m[36mTRANSACTION (15.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:11:in `create'
Completed 200 OK in 102ms (Views: 0.6ms | ActiveRecord: 90.3ms | Allocations: 4299)


Started GET "/users" for ::1 at 2022-06-30 17:42:28 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 11ms (Views: 7.2ms | ActiveRecord: 2.6ms | Allocations: 1952)


Started GET "/agencies" for ::1 at 2022-06-30 17:42:35 +0000
Processing by AgenciesController#index as */*
  [1m[36mAgency Load (38.7ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies"[0m
  â†³ app/controllers/agencies_controller.rb:5:in `index'
Completed 200 OK in 128ms (Views: 12.6ms | ActiveRecord: 52.1ms | Allocations: 5689)


Started POST "/users/%7B%7Buser_id%7D%7D/deposit" for ::1 at 2022-06-30 17:56:58 +0000
  
ActionController::RoutingError (No route matches [POST] "/users/%7B%7Buser_id%7D%7D/deposit"):
  
Started POST "/users/%7B%7Buser_id%7D%7D/deposit" for ::1 at 2022-06-30 17:59:14 +0000
  
ActionController::RoutingError (No route matches [POST] "/users/%7B%7Buser_id%7D%7D/deposit"):
  
Started POST "/users/e59c3579-0e0c-4ff6-8604-0fc46ae75d7f/deposit" for ::1 at 2022-06-30 18:00:55 +0000
  
SyntaxError (/home/mederic/formation_others/money_tf/app/controllers/users_controller.rb:19: syntax error, unexpected ',', expecting =>
    render json: { user, sold: user.sold }, status: :...
                       ^
/home/mederic/formation_others/money_tf/app/controllers/users_controller.rb:19: syntax error, unexpected '}', expecting `end'
...json: { user, sold: user.sold }, status: :ok
...                              ^
):
  
app/controllers/users_controller.rb:19: syntax error, unexpected ',', expecting =>
app/controllers/users_controller.rb:19: syntax error, unexpected '}', expecting `end'
app/controllers/users_controller.rb:19: syntax error, unexpected ',', expecting =>
app/controllers/users_controller.rb:19: syntax error, unexpected '}', expecting `end'
app/controllers/users_controller.rb:19: syntax error, unexpected ',', expecting =>
app/controllers/users_controller.rb:19: syntax error, unexpected '}', expecting `end'
Started GET "/user/sold" for ::1 at 2022-06-30 18:01:26 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"}}
  [1m[36mUser Load (28.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[35m (40.9ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 499ms (Views: 1.0ms | ActiveRecord: 227.7ms | Allocations: 17067)


Started GET "/user/transactions" for ::1 at 2022-06-30 18:01:40 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mUserTransaction Load (2.5ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/controllers/users_controller.rb:27:in `transactions'
Completed 200 OK in 75ms (Views: 57.3ms | ActiveRecord: 11.8ms | Allocations: 8372)


Started GET "/agencies" for ::1 at 2022-06-30 18:02:42 +0000
Processing by AgenciesController#index as */*
  [1m[36mAgency Load (1.6ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies"[0m
  â†³ app/controllers/agencies_controller.rb:5:in `index'
Completed 200 OK in 30ms (Views: 8.5ms | ActiveRecord: 1.6ms | Allocations: 4157)


Started GET "/user/sold" for ::1 at 2022-06-30 18:02:47 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"}}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[35m (2.9ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 19ms (Views: 0.6ms | ActiveRecord: 6.3ms | Allocations: 3859)


Started POST "/users/e59c3579-0e0c-4ff6-8604-0fc46ae75d7f/deposit" for ::1 at 2022-06-30 18:02:58 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>{"amount"=>15000}, "id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f", "user"=>{}}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `deposit'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:13:in `deposit'
  [1m[36mUserTransaction Create (121.1ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["type_of", 0], ["amount", "{\"amount\"=>15000}"], ["created_at", "2022-06-30 18:02:59.005596"], ["updated_at", "2022-06-30 18:02:59.005596"]]
  â†³ app/models/user.rb:13:in `deposit'
  [1m[36mTRANSACTION (6.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:13:in `deposit'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 145ms (Views: 0.7ms | ActiveRecord: 132.1ms | Allocations: 6542)


Started GET "/user/transactions" for ::1 at 2022-06-30 18:03:48 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"}}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mUserTransaction Load (3.1ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/controllers/users_controller.rb:27:in `transactions'
Completed 200 OK in 37ms (Views: 11.4ms | ActiveRecord: 5.0ms | Allocations: 3846)


  [1m[36mUserTransaction Destroy (15.5ms)[0m  [1m[31mDELETE FROM "user_transactions"[0m
Started GET "/user/transactions" for ::1 at 2022-06-30 18:05:37 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"}}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mUserTransaction Load (2.1ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/controllers/users_controller.rb:27:in `transactions'
Completed 200 OK in 48ms (Views: 4.0ms | ActiveRecord: 15.7ms | Allocations: 9626)


Started POST "/users/e59c3579-0e0c-4ff6-8604-0fc46ae75d7f/deposit" for ::1 at 2022-06-30 18:05:47 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>{"amount"=>15000}, "id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f", "user"=>{}}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `deposit'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:13:in `deposit'
  [1m[36mUserTransaction Create (2.9ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["type_of", 0], ["amount", "15000"], ["created_at", "2022-06-30 18:05:47.171456"], ["updated_at", "2022-06-30 18:05:47.171456"]]
  â†³ app/models/user.rb:13:in `deposit'
  [1m[36mTRANSACTION (17.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:13:in `deposit'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 88ms (Views: 0.5ms | ActiveRecord: 33.0ms | Allocations: 10215)


Started POST "/users/e59c3579-0e0c-4ff6-8604-0fc46ae75d7f/deposit" for ::1 at 2022-06-30 18:05:53 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>{"amount"=>2000}, "id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f", "user"=>{}}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `deposit'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:13:in `deposit'
  [1m[36mUserTransaction Create (7.4ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["type_of", 0], ["amount", "2000"], ["created_at", "2022-06-30 18:05:53.924131"], ["updated_at", "2022-06-30 18:05:53.924131"]]
  â†³ app/models/user.rb:13:in `deposit'
  [1m[36mTRANSACTION (25.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:13:in `deposit'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 66ms (Views: 0.4ms | ActiveRecord: 45.4ms | Allocations: 6359)


Started GET "/user/sold" for ::1 at 2022-06-30 18:06:15 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[35m (4.9ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 37ms (Views: 0.7ms | ActiveRecord: 15.1ms | Allocations: 9664)


  [1m[36mUserTransaction Destroy (16.2ms)[0m  [1m[31mDELETE FROM "user_transactions"[0m
Started GET "/user/transactions" for ::1 at 2022-06-30 18:07:16 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"}}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mUserTransaction Load (1.7ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/controllers/users_controller.rb:27:in `transactions'
Completed 200 OK in 41ms (Views: 6.5ms | ActiveRecord: 15.8ms | Allocations: 9617)


Started POST "/users/e59c3579-0e0c-4ff6-8604-0fc46ae75d7f/deposit" for ::1 at 2022-06-30 18:07:24 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>{"amount"=>2000}, "id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f", "user"=>{}}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `deposit'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:13:in `deposit'
  [1m[36mUserTransaction Create (1.7ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["type_of", 0], ["amount", "2000"], ["created_at", "2022-06-30 18:07:24.424558"], ["updated_at", "2022-06-30 18:07:24.424558"]]
  â†³ app/models/user.rb:13:in `deposit'
  [1m[36mTRANSACTION (18.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:13:in `deposit'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 58ms (Views: 0.7ms | ActiveRecord: 28.7ms | Allocations: 10190)


Started POST "/users/e59c3579-0e0c-4ff6-8604-0fc46ae75d7f/deposit" for ::1 at 2022-06-30 18:07:33 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>{"amount"=>15000}, "id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f", "user"=>{}}
  [1m[36mUser Load (12.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `deposit'
  [1m[36mTRANSACTION (19.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:13:in `deposit'
  [1m[36mUserTransaction Create (4.9ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["type_of", 0], ["amount", "15000"], ["created_at", "2022-06-30 18:07:33.485058"], ["updated_at", "2022-06-30 18:07:33.485058"]]
  â†³ app/models/user.rb:13:in `deposit'
  [1m[36mTRANSACTION (20.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:13:in `deposit'
  [1m[35m (2.0ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 99ms (Views: 0.7ms | ActiveRecord: 59.5ms | Allocations: 6360)


Started GET "/user/sold" for ::1 at 2022-06-30 18:08:10 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"}}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 500 Internal Server Error in 40ms (ActiveRecord: 16.7ms | Allocations: 9867)


  
RuntimeError ("200015000"):
  
app/models/user.rb:6:in `sold'
app/controllers/users_controller.rb:23:in `sold'
Started POST "/users/e59c3579-0e0c-4ff6-8604-0fc46ae75d7f/deposit" for ::1 at 2022-06-30 18:08:35 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>{"amount"=>15000}, "id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f", "user"=>{}}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `deposit'
Completed 500 Internal Server Error in 14ms (ActiveRecord: 9.8ms | Allocations: 3759)


  
RuntimeError (15000):
  
app/models/user.rb:14:in `deposit'
app/controllers/users_controller.rb:18:in `deposit'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (44.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (1713.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_development"[0m
  [1m[35m (579.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_test"[0m
  [1m[35m (1708.8ms)[0m  [1m[35mCREATE DATABASE "money_tf_development" ENCODING = 'unicode'[0m
  [1m[35m (805.0ms)[0m  [1m[35mCREATE DATABASE "money_tf_test" ENCODING = 'unicode'[0m
  [1m[35m (194.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (114.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (9.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5765488955715387570)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to EnablePgCrypto (20220623113514)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (147.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto"[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220623113514"]]
  [1m[36mTRANSACTION (11.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20220629140930)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (132.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "number" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629140930"]]
  [1m[36mTRANSACTION (17.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAgencies (20220629141040)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (90.5ms)[0m  [1m[35mCREATE TABLE "agencies" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141040"]]
  [1m[36mTRANSACTION (17.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCosts (20220629141113)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (56.9ms)[0m  [1m[35mCREATE TABLE "costs" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "amount" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_27278fdb3e"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (40.0ms)[0m  [1m[35mCREATE INDEX "index_costs_on_agency_id" ON "costs" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141113"]]
  [1m[36mTRANSACTION (14.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUserTransactions (20220629141348)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (204.6ms)[0m  [1m[35mCREATE TABLE "user_transactions" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "user_id" uuid, "type_of" character varying, "receiver_id" uuid, "amount" integer, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_e0527492c6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_d80181d2f2"
FOREIGN KEY ("receiver_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (106.7ms)[0m  [1m[35mCREATE INDEX "index_user_transactions_on_user_id" ON "user_transactions" ("user_id")[0m
  [1m[35m (40.0ms)[0m  [1m[35mCREATE INDEX "index_user_transactions_on_receiver_id" ON "user_transactions" ("receiver_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141348"]]
  [1m[36mTRANSACTION (20.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAgencyTransactions (20220629141547)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (170.9ms)[0m  [1m[35mCREATE TABLE "agency_transactions" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "type_of" character varying, "sender" character varying, "receiver" character varying, "amount" integer, "fee" integer DEFAULT 0, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f21bb2ac60"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (98.8ms)[0m  [1m[35mCREATE INDEX "index_agency_transactions_on_agency_id" ON "agency_transactions" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141547"]]
  [1m[36mTRANSACTION (18.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-06-30 18:10:55.785347"], ["updated_at", "2022-06-30 18:10:55.785347"]]
  [1m[36mTRANSACTION (22.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(5765488955715387570)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/agencies/create" for ::1 at 2022-06-30 18:11:27 +0000
  [1m[35m (4.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AgenciesController#create as */*
  Parameters: {"agency"=>{"name"=>"Dudu agency", "cost"=>800}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/agencies_controller.rb:9:in `create'
  [1m[36mAgency Create (2.9ms)[0m  [1m[32mINSERT INTO "agencies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Dudu agency"], ["created_at", "2022-06-30 18:11:28.299747"], ["updated_at", "2022-06-30 18:11:28.299747"]]
  â†³ app/controllers/agencies_controller.rb:9:in `create'
  [1m[36mTRANSACTION (25.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/agencies_controller.rb:9:in `create'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/agencies_controller.rb:10:in `create'
  [1m[36mAgency Load (1.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:10:in `create'
  [1m[36mCost Create (2.3ms)[0m  [1m[32mINSERT INTO "costs" ("agency_id", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["amount", 800], ["created_at", "2022-06-30 18:11:28.462379"], ["updated_at", "2022-06-30 18:11:28.462379"]]
  â†³ app/controllers/agencies_controller.rb:10:in `create'
  [1m[36mTRANSACTION (24.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/agencies_controller.rb:10:in `create'
Completed 200 OK in 256ms (Views: 0.9ms | ActiveRecord: 75.2ms | Allocations: 19821)


Started POST "/users/create" for ::1 at 2022-06-30 18:11:40 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Albert", "number"=>"0102030405"}}
  [1m[36mTRANSACTION (4.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("name", "number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Albert"], ["number", "0102030405"], ["created_at", "2022-06-30 18:11:40.676958"], ["updated_at", "2022-06-30 18:11:40.676958"]]
  â†³ app/controllers/users_controller.rb:11:in `create'
  [1m[36mTRANSACTION (44.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:11:in `create'
Completed 200 OK in 70ms (Views: 0.5ms | ActiveRecord: 55.2ms | Allocations: 7249)


Started GET "/user/sold" for ::1 at 2022-06-30 18:12:00 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"id"=>"9c984312-37ee-4cc2-9933-520a4790eb07"}}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[35m (2.6ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 500 Internal Server Error in 68ms (ActiveRecord: 8.7ms | Allocations: 6971)


  
RuntimeError (0):
  
app/models/user.rb:6:in `sold'
app/controllers/users_controller.rb:23:in `sold'
Started GET "/user/sold" for ::1 at 2022-06-30 18:12:36 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"id"=>"9c984312-37ee-4cc2-9933-520a4790eb07"}}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:36:in `user'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 43ms (Views: 0.6ms | ActiveRecord: 16.9ms | Allocations: 9968)


Started POST "/users/e59c3579-0e0c-4ff6-8604-0fc46ae75d7f/deposit" for ::1 at 2022-06-30 18:12:46 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>{"amount"=>15000}, "id"=>"e59c3579-0e0c-4ff6-8604-0fc46ae75d7f", "user"=>{}}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "e59c3579-0e0c-4ff6-8604-0fc46ae75d7f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `deposit'
Completed 404 Not Found in 17ms (ActiveRecord: 2.1ms | Allocations: 1811)


  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=e59c3579-0e0c-4ff6-8604-0fc46ae75d7f):
  
app/controllers/users_controller.rb:17:in `deposit'
Started POST "/users/9c984312-37ee-4cc2-9933-520a4790eb07/deposit" for ::1 at 2022-06-30 18:13:10 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>{"amount"=>15000}, "id"=>"9c984312-37ee-4cc2-9933-520a4790eb07", "user"=>{}}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `deposit'
  [1m[36mTRANSACTION (3.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:14:in `deposit'
  [1m[36mUserTransaction Create (5.7ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "deposit"], ["amount", 15000], ["created_at", "2022-06-30 18:13:10.422493"], ["updated_at", "2022-06-30 18:13:10.422493"]]
  â†³ app/models/user.rb:14:in `deposit'
  [1m[36mTRANSACTION (22.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:14:in `deposit'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 87ms (Views: 0.4ms | ActiveRecord: 44.1ms | Allocations: 10510)


Started POST "/users/9c984312-37ee-4cc2-9933-520a4790eb07/deposit" for ::1 at 2022-06-30 18:13:18 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>{"amount"=>2000}, "id"=>"9c984312-37ee-4cc2-9933-520a4790eb07", "user"=>{}}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `deposit'
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:14:in `deposit'
  [1m[36mUserTransaction Create (2.7ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "deposit"], ["amount", 2000], ["created_at", "2022-06-30 18:13:18.240384"], ["updated_at", "2022-06-30 18:13:18.240384"]]
  â†³ app/models/user.rb:14:in `deposit'
  [1m[36mTRANSACTION (22.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:14:in `deposit'
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 49ms (Views: 0.5ms | ActiveRecord: 31.6ms | Allocations: 6343)


Started GET "/user/sold" for ::1 at 2022-06-30 18:25:11 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
[31mUnpermitted parameter: :number[0m
Completed 404 Not Found in 450ms (ActiveRecord: 130.0ms | Allocations: 7148)


  
ActiveRecord::RecordNotFound (Couldn't find User without an ID):
  
app/controllers/users_controller.rb:37:in `user'
Started GET "/user/sold" for ::1 at 2022-06-30 18:26:12 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `sold'
  [1m[35m (2.0ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 82ms (Views: 0.6ms | ActiveRecord: 49.8ms | Allocations: 9205)


Started POST "/users/0102030405/deposit" for ::1 at 2022-06-30 18:27:30 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>{"amount"=>3000}, "number"=>"0102030405", "user"=>{}}
  [1m[36mUser Load (36.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (0102030405) LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `deposit'
Completed 500 Internal Server Error in 39ms (ActiveRecord: 39.6ms | Allocations: 1556)


  
ActiveRecord::StatementInvalid (PG::DatatypeMismatch: ERROR:  argument of WHERE must be type boolean, not type integer
LINE 1: SELECT "users".* FROM "users" WHERE (0102030405) LIMIT $1
                                             ^
):
  
app/controllers/users_controller.rb:17:in `deposit'
Started POST "/users/0102030405/deposit" for ::1 at 2022-06-30 18:28:00 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>{"amount"=>3000}, "number"=>"0102030405", "user"=>{}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (0102030405) LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `deposit'
Completed 500 Internal Server Error in 4ms (ActiveRecord: 5.1ms | Allocations: 1545)


  
ActiveRecord::StatementInvalid (PG::DatatypeMismatch: ERROR:  argument of WHERE must be type boolean, not type integer
LINE 1: SELECT "users".* FROM "users" WHERE (0102030405) LIMIT $1
                                             ^
):
  
app/controllers/users_controller.rb:17:in `deposit'
Started POST "/users/0102030405/deposit" for ::1 at 2022-06-30 18:28:18 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>{"amount"=>3000}, "number"=>"0102030405", "user"=>{}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 3.7ms | Allocations: 504)


  
RuntimeError ("0102030405"):
  
app/controllers/users_controller.rb:17:in `deposit'
Started POST "/users/0102030405/deposit" for ::1 at 2022-06-30 18:28:32 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>{"amount"=>3000}, "number"=>"0102030405", "user"=>{}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `deposit'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:14:in `deposit'
  [1m[36mUserTransaction Create (69.3ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "deposit"], ["amount", 3000], ["created_at", "2022-06-30 18:28:33.047222"], ["updated_at", "2022-06-30 18:28:33.047222"]]
  â†³ app/models/user.rb:14:in `deposit'
  [1m[36mTRANSACTION (11.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:14:in `deposit'
  [1m[35m (2.6ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 131ms (Views: 1.2ms | ActiveRecord: 100.3ms | Allocations: 14105)


Started GET "/user/sold" for ::1 at 2022-06-30 18:31:35 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `sold'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 46ms (Views: 0.5ms | ActiveRecord: 12.9ms | Allocations: 8450)


Started GET "/user/transactions" for ::1 at 2022-06-30 18:31:41 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:28:in `transactions'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 2.1ms | Allocations: 1924)


  
RuntimeError (#<User id: "9c984312-37ee-4cc2-9933-520a4790eb07", name: "Albert", number: "0102030405", created_at: "2022-06-30 18:11:40.676958000 +0000", updated_at: "2022-06-30 18:11:40.676958000 +0000">):
  
app/controllers/users_controller.rb:29:in `transactions'
Started GET "/user/transactions" for ::1 at 2022-06-30 18:32:01 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:28:in `transactions'
  [1m[36mUserTransaction Load (1.3ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"]]
  â†³ app/controllers/users_controller.rb:29:in `transactions'
Completed 200 OK in 51ms (Views: 13.0ms | ActiveRecord: 19.9ms | Allocations: 13144)


Started GET "/agencies" for ::1 at 2022-06-30 18:32:38 +0000
Processing by AgenciesController#index as */*
  [1m[36mAgency Load (3.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies"[0m
  â†³ app/controllers/agencies_controller.rb:5:in `index'
Completed 200 OK in 33ms (Views: 9.4ms | ActiveRecord: 10.0ms | Allocations: 5432)


  [1m[36mAgency Load (0.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" ORDER BY "agencies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (24.0ms)[0m  [1m[34mSELECT "agency_transactions"."amount" FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"]]
Started GET "/agencies/sold" for ::1 at 2022-06-30 19:02:42 +0000
  
ActionController::RoutingError (No route matches [GET] "/agencies/sold"):
  
Started GET "/agency/sold" for ::1 at 2022-06-30 19:02:59 +0000
  
SyntaxError (/home/mederic/formation_others/money_tf/app/controllers/agencies_controller.rb:16: syntax error, unexpected ':', expecting '}'
    render { json: agency: agency, sold: agency...
                 ^
/home/mederic/formation_others/money_tf/app/controllers/agencies_controller.rb:16: syntax error, unexpected '}', expecting `end'
...cy: agency, sold: agency.sold }
...                              ^
/home/mederic/formation_others/money_tf/app/controllers/agencies_controller.rb:45: syntax error, unexpected end-of-input, expecting `end'):
  
app/controllers/agencies_controller.rb:16: syntax error, unexpected ':', expecting '}'
app/controllers/agencies_controller.rb:16: syntax error, unexpected '}', expecting `end'
app/controllers/agencies_controller.rb:45: syntax error, unexpected end-of-input, expecting `end'
app/controllers/agencies_controller.rb:16: syntax error, unexpected ':', expecting '}'
app/controllers/agencies_controller.rb:16: syntax error, unexpected '}', expecting `end'
app/controllers/agencies_controller.rb:45: syntax error, unexpected end-of-input, expecting `end'
app/controllers/agencies_controller.rb:16: syntax error, unexpected ':', expecting '}'
app/controllers/agencies_controller.rb:16: syntax error, unexpected '}', expecting `end'
app/controllers/agencies_controller.rb:45: syntax error, unexpected end-of-input, expecting `end'
Started GET "/agency/sold" for ::1 at 2022-06-30 19:03:15 +0000
Processing by AgenciesController#sold as */*
  Parameters: {"agency"=>{"id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0"}}
Completed 500 Internal Server Error in 9ms (Allocations: 2856)


  
NoMethodError (undefined method `set_agency' for #<AgenciesController:0x00000000016418>
Did you mean?  set_trace_func):
  
activesupport (6.1.6) lib/active_support/callbacks.rb:427:in `block in make_lambda'
activesupport (6.1.6) lib/active_support/callbacks.rb:179:in `block (2 levels) in halting_and_conditional'
actionpack (6.1.6) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.1.6) lib/active_support/callbacks.rb:180:in `block in halting_and_conditional'
activesupport (6.1.6) lib/active_support/callbacks.rb:512:in `block in invoke_before'
activesupport (6.1.6) lib/active_support/callbacks.rb:512:in `each'
activesupport (6.1.6) lib/active_support/callbacks.rb:512:in `invoke_before'
activesupport (6.1.6) lib/active_support/callbacks.rb:115:in `block in run_callbacks'
actiontext (6.1.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
rack (2.2.3.1) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3.1) lib/rack/etag.rb:27:in `call'
rack (2.2.3.1) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.3.1) lib/rack/head.rb:12:in `call'
actionpack (6.1.6) lib/action_dispatch/http/permissions_policy.rb:22:in `call'
actionpack (6.1.6) lib/action_dispatch/http/content_security_policy.rb:19:in `call'
rack (2.2.3.1) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3.1) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (6.1.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.6) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.3.1) lib/rack/method_override.rb:24:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-mini-profiler (2.3.4) lib/mini_profiler/profiler.rb:393:in `call'
webpacker (5.4.3) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.7.2) lib/rack/proxy.rb:67:in `call'
railties (6.1.6) lib/rails/engine.rb:539:in `call'
puma (5.6.4) lib/puma/configuration.rb:252:in `call'
puma (5.6.4) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.4) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.4) lib/puma/request.rb:76:in `handle_request'
puma (5.6.4) lib/puma/server.rb:441:in `process_client'
puma (5.6.4) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/agency/sold" for ::1 at 2022-06-30 19:03:49 +0000
Processing by AgenciesController#sold as */*
  Parameters: {"agency"=>{"id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0"}}
  [1m[36mAgency Load (1.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:15:in `sold'
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "agency_transactions"."amount" FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"]]
  â†³ app/models/agency.rb:6:in `sold'
Completed 200 OK in 79ms (Views: 0.7ms | ActiveRecord: 29.2ms | Allocations: 13153)


Started GET "/agency/sold" for ::1 at 2022-06-30 19:05:03 +0000
Processing by AgenciesController#sold as */*
  Parameters: {"agency"=>{"id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0"}}
  [1m[36mAgency Load (1.8ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:15:in `sold'
  [1m[35m (2.3ms)[0m  [1m[34mSELECT "agency_transactions"."amount" FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"]]
  â†³ app/models/agency.rb:6:in `sold'
Completed 200 OK in 4177ms (Views: 1.2ms | ActiveRecord: 24.0ms | Allocations: 8518)


Started GET "/agency/transactions" for ::1 at 2022-06-30 19:06:18 +0000
Processing by AgenciesController#transactions as */*
  Parameters: {"agency"=>{"id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0"}}
  [1m[36mAgency Load (1.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:20:in `transactions'
  [1m[36mAgencyTransaction Load (1.8ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"]]
  â†³ app/controllers/agencies_controller.rb:21:in `transactions'
Completed 200 OK in 34ms (Views: 5.9ms | ActiveRecord: 12.3ms | Allocations: 8523)


Started GET "/agency/sold" for ::1 at 2022-06-30 19:12:01 +0000
Processing by AgenciesController#sold as */*
  Parameters: {"agency"=>{"id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0"}}
  [1m[36mAgency Load (1.4ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:32:in `agency'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:32:in `agency'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "agency_transactions"."amount" FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"]]
  â†³ app/models/agency.rb:6:in `sold'
Completed 200 OK in 133ms (Views: 0.8ms | ActiveRecord: 79.7ms | Allocations: 12623)


Started GET "/user/sold" for ::1 at 2022-06-30 19:12:52 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 49ms (Views: 0.8ms | ActiveRecord: 19.4ms | Allocations: 9274)


Started GET "/agency/sold" for ::1 at 2022-06-30 19:14:20 +0000
Processing by AgenciesController#sold as */*
  Parameters: {"agency"=>{"id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0"}}
  [1m[36mAgency Load (1.7ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:30:in `agency'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:30:in `agency'
  [1m[35m (2.4ms)[0m  [1m[34mSELECT "agency_transactions"."amount" FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"]]
  â†³ app/models/agency.rb:6:in `sold'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:30:in `agency'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "agency_transactions"."fee" FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"]]
  â†³ app/models/agency.rb:14:in `fees'
Completed 200 OK in 43ms (Views: 0.5ms | ActiveRecord: 15.0ms | Allocations: 10002)


Started GET "/user/transactions" for ::1 at 2022-06-30 19:15:29 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mUserTransaction Load (1.3ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"]]
  â†³ app/controllers/users_controller.rb:27:in `transactions'
Completed 200 OK in 108ms (Views: 12.4ms | ActiveRecord: 12.9ms | Allocations: 13379)


Started GET "/user/sold" for ::1 at 2022-06-30 19:15:47 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 9ms (Views: 0.4ms | ActiveRecord: 2.4ms | Allocations: 3461)


Started GET "/users" for ::1 at 2022-07-01 09:50:31 +0000
  [1m[35m (65.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#index as */*
  [1m[36mUser Load (79.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 268ms (Views: 23.0ms | ActiveRecord: 108.3ms | Allocations: 7281)


Started GET "/agencies" for ::1 at 2022-07-01 09:50:41 +0000
Processing by AgenciesController#index as */*
  [1m[36mAgency Load (24.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies"[0m
  â†³ app/controllers/agencies_controller.rb:5:in `index'
Completed 200 OK in 121ms (Views: 18.4ms | ActiveRecord: 33.4ms | Allocations: 5745)


Started GET "/user/sold" for ::1 at 2022-07-01 09:51:12 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[35m (28.8ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 215ms (Views: 0.7ms | ActiveRecord: 34.2ms | Allocations: 10948)


Started GET "/user/transactions" for ::1 at 2022-07-01 09:51:51 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mUserTransaction Load (9.2ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"]]
  â†³ app/controllers/users_controller.rb:27:in `transactions'
Completed 200 OK in 144ms (Views: 94.8ms | ActiveRecord: 15.5ms | Allocations: 11765)


Started GET "/agency/sold" for ::1 at 2022-07-01 09:51:59 +0000
Processing by AgenciesController#sold as */*
  Parameters: {"agency"=>{"id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0"}}
  [1m[36mAgency Load (2.1ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:30:in `agency'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:30:in `agency'
  [1m[35m (26.5ms)[0m  [1m[34mSELECT "agency_transactions"."amount" FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"]]
  â†³ app/models/agency.rb:6:in `sold'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:30:in `agency'
  [1m[35m (2.4ms)[0m  [1m[34mSELECT "agency_transactions"."fee" FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"]]
  â†³ app/models/agency.rb:14:in `fees'
Completed 200 OK in 326ms (Views: 14.5ms | ActiveRecord: 35.3ms | Allocations: 6844)


Started GET "/agency/transactions" for ::1 at 2022-07-01 09:52:04 +0000
Processing by AgenciesController#transactions as */*
  Parameters: {"agency"=>{"id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0"}}
  [1m[36mAgency Load (9.9ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:30:in `agency'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:30:in `agency'
  [1m[36mAgencyTransaction Load (6.3ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"]]
  â†³ app/controllers/agencies_controller.rb:19:in `transactions'
Completed 200 OK in 55ms (Views: 20.5ms | ActiveRecord: 16.3ms | Allocations: 3375)


Started POST "/users/deposit" for ::1 at 2022-07-01 09:56:24 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>{"number"=>"0102030405", "amount"=>100}, "user"=>{}}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:17:in `deposit'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:14:in `deposit'
  [1m[36mUserTransaction Create (158.0ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "deposit"], ["amount", 100], ["created_at", "2022-07-01 09:56:24.829063"], ["updated_at", "2022-07-01 09:56:24.829063"]]
  â†³ app/models/user.rb:14:in `deposit'
  [1m[36mTRANSACTION (21.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:14:in `deposit'
  [1m[35m (2.0ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 235ms (Views: 0.6ms | ActiveRecord: 197.2ms | Allocations: 14258)


Started GET "/user/transactions" for ::1 at 2022-07-01 09:56:34 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (7.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mUserTransaction Load (3.2ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"]]
  â†³ app/controllers/users_controller.rb:27:in `transactions'
Completed 200 OK in 29ms (Views: 11.0ms | ActiveRecord: 10.3ms | Allocations: 4252)


Started GET "/user/sold" for ::1 at 2022-07-01 09:56:44 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[35m (4.5ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 32ms (Views: 0.6ms | ActiveRecord: 6.6ms | Allocations: 3463)


Started POST "/users/create" for ::1 at 2022-07-01 11:48:36 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Vaouhan", "number"=>"0770077007"}}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Create (115.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Vaouhan"], ["number", "0770077007"], ["created_at", "2022-07-01 11:48:38.711774"], ["updated_at", "2022-07-01 11:48:38.711774"]]
  â†³ app/controllers/users_controller.rb:11:in `create'
  [1m[36mTRANSACTION (28.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:11:in `create'
Completed 200 OK in 258ms (Views: 0.4ms | ActiveRecord: 240.2ms | Allocations: 12222)


Started POST "/agency/transfer" for ::1 at 2022-07-01 11:49:30 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "reciever"=>"0770077007", "amount"=>11000}, "agency"=>{}}
No template found for AgenciesController#transfer, rendering head :no_content
Completed 204 No Content in 23ms (ActiveRecord: 3.3ms | Allocations: 1676)


Started GET "/agency/transactions" for ::1 at 2022-07-01 11:49:39 +0000
Processing by AgenciesController#transactions as */*
  Parameters: {"agency"=>{"id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0"}}
  [1m[36mAgency Load (3.7ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:31:in `agency'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:31:in `agency'
  [1m[36mAgencyTransaction Load (2.6ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"]]
  â†³ app/controllers/agencies_controller.rb:19:in `transactions'
Completed 200 OK in 62ms (Views: 5.8ms | ActiveRecord: 18.7ms | Allocations: 8221)


Started POST "/agency/transfer" for ::1 at 2022-07-01 11:49:49 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "reciever"=>"0770077007", "amount"=>11000}, "agency"=>{}}
No template found for AgenciesController#transfer, rendering head :no_content
Completed 204 No Content in 1ms (ActiveRecord: 0.0ms | Allocations: 202)


Started GET "/user/transactions" for ::1 at 2022-07-01 11:49:56 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `user'
  [1m[36mUserTransaction Load (2.6ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"]]
  â†³ app/controllers/users_controller.rb:27:in `transactions'
Completed 200 OK in 56ms (Views: 18.4ms | ActiveRecord: 4.8ms | Allocations: 8890)


Started POST "/agency/transfer" for ::1 at 2022-07-01 11:55:09 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "reciever"=>"0770077007", "amount"=>11000}, "agency"=>{}}
[31mUnpermitted parameter: :reciever[0m
  [1m[36mAgency Load (1.2ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
Completed 500 Internal Server Error in 11ms (ActiveRecord: 7.8ms | Allocations: 3495)


  
RuntimeError (#<Agency id: "1e46709a-680f-4f8f-bd2d-db73f934e3b0", name: "Dudu agency", created_at: "2022-06-30 18:11:28.299747000 +0000", updated_at: "2022-06-30 18:11:28.299747000 +0000">):
  
app/controllers/agencies_controller.rb:24:in `transfer'
Started POST "/agency/transfer" for ::1 at 2022-07-01 12:09:30 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "reciever"=>"0770077007", "amount"=>11000}, "agency"=>{}}
[31mUnpermitted parameter: :reciever[0m
  [1m[36mAgency Load (18.8ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
[31mUnpermitted parameter: :reciever[0m
[31mUnpermitted parameter: :reciever[0m
[31mUnpermitted parameter: :reciever[0m
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:18:in `transfer'
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:19:in `transfer'
Completed 500 Internal Server Error in 86ms (ActiveRecord: 119.5ms | Allocations: 11984)


  
NameError (undefined local variable or method `receiver_number' for #<Agency:0x00007f3afc1d3510>):
  
app/models/agency.rb:20:in `transfer'
app/controllers/agencies_controller.rb:26:in `transfer'
Started POST "/agency/transfer" for ::1 at 2022-07-01 12:10:06 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "reciever"=>"0770077007", "amount"=>11000}, "agency"=>{}}
[31mUnpermitted parameter: :reciever[0m
  [1m[36mAgency Load (1.8ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
[31mUnpermitted parameter: :reciever[0m
[31mUnpermitted parameter: :reciever[0m
[31mUnpermitted parameter: :reciever[0m
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:18:in `transfer'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:19:in `transfer'
Completed 500 Internal Server Error in 65ms (ActiveRecord: 15.5ms | Allocations: 11665)


  
NameError (undefined local variable or method `receiver_number' for #<Agency:0x000055d13681c588>):
  
app/models/agency.rb:20:in `transfer'
app/controllers/agencies_controller.rb:26:in `transfer'
Started POST "/agency/transfer" for ::1 at 2022-07-01 12:10:36 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "reciever"=>"0770077007", "amount"=>11000}, "agency"=>{}}
[31mUnpermitted parameter: :reciever[0m
  [1m[36mAgency Load (1.1ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
[31mUnpermitted parameter: :reciever[0m
[31mUnpermitted parameter: :reciever[0m
[31mUnpermitted parameter: :reciever[0m
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:18:in `transfer'
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:19:in `transfer'
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/models/agency.rb:20:in `transfer'
Completed 500 Internal Server Error in 75ms (ActiveRecord: 19.3ms | Allocations: 11407)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/models/agency.rb:27:in `block in transfer'
app/models/agency.rb:22:in `transfer'
app/controllers/agencies_controller.rb:26:in `transfer'
Started POST "/agency/transfer" for ::1 at 2022-07-01 12:11:27 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "reciever"=>"0770077007", "amount"=>11000}, "agency"=>{}}
[31mUnpermitted parameter: :reciever[0m
  [1m[36mAgency Load (1.2ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
[31mUnpermitted parameter: :reciever[0m
[31mUnpermitted parameter: :reciever[0m
[31mUnpermitted parameter: :reciever[0m
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:18:in `transfer'
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:19:in `transfer'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/models/agency.rb:20:in `transfer'
Completed 500 Internal Server Error in 43ms (ActiveRecord: 20.2ms | Allocations: 9767)


  
RuntimeError (#<User id: "9c984312-37ee-4cc2-9933-520a4790eb07", name: "Albert", number: "0102030405", created_at: "2022-06-30 18:11:40.676958000 +0000", updated_at: "2022-06-30 18:11:40.676958000 +0000">):
  
app/models/agency.rb:21:in `transfer'
app/controllers/agencies_controller.rb:26:in `transfer'
Started POST "/agency/transfer" for ::1 at 2022-07-01 12:11:35 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "reciever"=>"0770077007", "amount"=>11000}, "agency"=>{}}
[31mUnpermitted parameter: :reciever[0m
  [1m[36mAgency Load (1.4ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
[31mUnpermitted parameter: :reciever[0m
[31mUnpermitted parameter: :reciever[0m
[31mUnpermitted parameter: :reciever[0m
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:18:in `transfer'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:19:in `transfer'
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/models/agency.rb:20:in `transfer'
Completed 500 Internal Server Error in 43ms (ActiveRecord: 22.2ms | Allocations: 9713)


  
RuntimeError (nil):
  
app/models/agency.rb:21:in `transfer'
app/controllers/agencies_controller.rb:26:in `transfer'
Started GET "/users" for ::1 at 2022-07-01 12:11:43 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 20ms (Views: 16.0ms | ActiveRecord: 3.4ms | Allocations: 2035)


Started POST "/agency/transfer" for ::1 at 2022-07-01 12:12:11 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>11000}, "agency"=>{}}
  [1m[36mAgency Load (1.1ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:18:in `transfer'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:19:in `transfer'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:20:in `transfer'
Completed 500 Internal Server Error in 11ms (ActiveRecord: 3.6ms | Allocations: 4209)


  
RuntimeError (#<User id: "d23ae364-be65-4d18-9693-bd139bb90ea2", name: "Vaouhan", number: "0770077007", created_at: "2022-07-01 11:48:38.711774000 +0000", updated_at: "2022-07-01 11:48:38.711774000 +0000">):
  
app/models/agency.rb:21:in `transfer'
app/controllers/agencies_controller.rb:26:in `transfer'
Started POST "/agency/transfer" for ::1 at 2022-07-01 12:12:24 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>11000}, "agency"=>{}}
  [1m[36mAgency Load (1.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:18:in `transfer'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:19:in `transfer'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:20:in `transfer'
Completed 500 Internal Server Error in 42ms (ActiveRecord: 19.1ms | Allocations: 9470)


  
RuntimeError (7139):
  
app/models/agency.rb:22:in `transfer'
app/controllers/agencies_controller.rb:26:in `transfer'
Started POST "/agency/transfer" for ::1 at 2022-07-01 12:12:32 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>11000}, "agency"=>{}}
  [1m[36mAgency Load (1.1ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:18:in `transfer'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:19:in `transfer'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:20:in `transfer'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/agency.rb:25:in `block in transfer'
  [1m[36mUserTransaction Create (77.2ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "transfer"], ["receiver_id", "d23ae364-be65-4d18-9693-bd139bb90ea2"], ["amount", -11000], ["code", "528"], ["created_at", "2022-07-01 12:12:32.230486"], ["updated_at", "2022-07-01 12:12:32.230486"]]
  â†³ app/models/agency.rb:25:in `block in transfer'
  [1m[36mAgency Load (1.2ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:63:in `agency_cost'
  [1m[36mCost Load (69.7ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/agency.rb:23:in `transfer'
Completed 500 Internal Server Error in 298ms (ActiveRecord: 182.1ms | Allocations: 27045)


  
ArgumentError (wrong number of arguments (given 0, expected 1)):
  
app/models/agency.rb:62:in `agency_cost'
app/models/agency.rb:39:in `block in transfer'
app/models/agency.rb:23:in `transfer'
app/controllers/agencies_controller.rb:26:in `transfer'
Started POST "/agency/transfer" for ::1 at 2022-07-01 12:13:22 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>11000}, "agency"=>{}}
  [1m[36mAgency Load (1.7ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:18:in `transfer'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:19:in `transfer'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:20:in `transfer'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/agency.rb:25:in `block in transfer'
  [1m[36mUserTransaction Create (2.7ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "transfer"], ["receiver_id", "d23ae364-be65-4d18-9693-bd139bb90ea2"], ["amount", -11000], ["code", "8033"], ["created_at", "2022-07-01 12:13:22.297011"], ["updated_at", "2022-07-01 12:13:22.297011"]]
  â†³ app/models/agency.rb:25:in `block in transfer'
  [1m[36mAgency Load (1.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:63:in `agency_cost'
  [1m[36mCost Load (2.5ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:63:in `agency_cost'
  [1m[36mCACHE Cost Load (0.0ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/agency.rb:23:in `transfer'
Completed 500 Internal Server Error in 133ms (ActiveRecord: 56.2ms | Allocations: 33453)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `sender_id`):
  
app/models/agency.rb:33:in `block in transfer'
app/models/agency.rb:23:in `transfer'
app/controllers/agencies_controller.rb:26:in `transfer'
Started POST "/agency/transfer" for ::1 at 2022-07-01 14:23:57 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>11000}, "agency"=>{}}
  [1m[36mAgency Load (13.7ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:18:in `transfer'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:19:in `transfer'
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:20:in `transfer'
  [1m[36mAgencyTransaction Load (2.3ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 11]]
  â†³ app/models/agency.rb:23:in `transfer'
Completed 500 Internal Server Error in 124ms (ActiveRecord: 94.5ms | Allocations: 10866)


  
RuntimeError (#<ActiveRecord::Associations::CollectionProxy []>):
  
app/models/agency.rb:23:in `transfer'
app/controllers/agencies_controller.rb:26:in `transfer'
Started POST "/agency/transfer" for ::1 at 2022-07-01 14:24:38 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>11000}, "agency"=>{}}
  [1m[36mAgency Load (1.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
Completed 500 Internal Server Error in 15ms (ActiveRecord: 12.4ms | Allocations: 3449)


  
RuntimeError (#<Agency id: "1e46709a-680f-4f8f-bd2d-db73f934e3b0", name: "Dudu agency", created_at: "2022-06-30 18:11:28.299747000 +0000", updated_at: "2022-06-30 18:11:28.299747000 +0000">):
  
app/controllers/agencies_controller.rb:24:in `transfer'
Started POST "/agency/transfer" for ::1 at 2022-07-01 14:25:49 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>11000}, "agency"=>{}}
  [1m[36mAgency Load (1.8ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
  [1m[36mAgencyTransaction Load (2.4ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 11]]
  â†³ app/controllers/agencies_controller.rb:24:in `transfer'
Completed 500 Internal Server Error in 50ms (ActiveRecord: 14.5ms | Allocations: 6682)


  
RuntimeError (#<ActiveRecord::Associations::CollectionProxy []>):
  
app/controllers/agencies_controller.rb:24:in `transfer'
Started POST "/agency/transfer" for ::1 at 2022-07-01 14:27:57 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>11000}, "agency"=>{}}
  [1m[36mAgency Load (1.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:18:in `transfer'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:19:in `transfer'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:20:in `transfer'
  [1m[36mAgencyTransaction Load (1.8ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 11]]
  â†³ app/models/agency.rb:23:in `transfer'
Completed 500 Internal Server Error in 100ms (ActiveRecord: 23.0ms | Allocations: 12787)


  
RuntimeError (#<ActiveRecord::Associations::CollectionProxy []>):
  
app/models/agency.rb:23:in `transfer'
app/controllers/agencies_controller.rb:25:in `transfer'
Started POST "/agency/transfer" for ::1 at 2022-07-01 14:28:21 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>11000}, "agency"=>{}}
  [1m[36mAgency Load (1.4ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:18:in `transfer'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:19:in `transfer'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:20:in `transfer'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/agency.rb:25:in `block in transfer'
  [1m[36mUserTransaction Create (139.2ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "transfer"], ["receiver_id", "d23ae364-be65-4d18-9693-bd139bb90ea2"], ["amount", -11000], ["code", "2005"], ["created_at", "2022-07-01 14:28:22.102751"], ["updated_at", "2022-07-01 14:28:22.102751"]]
  â†³ app/models/agency.rb:25:in `block in transfer'
  [1m[36mAgency Load (1.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:63:in `agency_cost'
  [1m[36mCost Load (1.9ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:63:in `agency_cost'
  [1m[36mCACHE Cost Load (0.0ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/agency.rb:23:in `transfer'
Completed 500 Internal Server Error in 294ms (ActiveRecord: 184.6ms | Allocations: 33332)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `sender_id`):
  
app/models/agency.rb:33:in `block in transfer'
app/models/agency.rb:23:in `transfer'
app/controllers/agencies_controller.rb:25:in `transfer'
Started POST "/agency/transfer" for ::1 at 2022-07-01 14:28:45 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>11000}, "agency"=>{}}
  [1m[36mAgency Load (1.7ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:18:in `transfer'
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:19:in `transfer'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:20:in `transfer'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/agency.rb:25:in `block in transfer'
  [1m[36mUserTransaction Create (2.4ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "transfer"], ["receiver_id", "d23ae364-be65-4d18-9693-bd139bb90ea2"], ["amount", -11000], ["code", "5197"], ["created_at", "2022-07-01 14:28:45.221851"], ["updated_at", "2022-07-01 14:28:45.221851"]]
  â†³ app/models/agency.rb:25:in `block in transfer'
  [1m[36mAgency Load (1.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:63:in `agency_cost'
  [1m[36mCost Load (2.9ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:63:in `agency_cost'
  [1m[36mCACHE Cost Load (0.0ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/agency.rb:23:in `transfer'
Completed 500 Internal Server Error in 120ms (ActiveRecord: 55.2ms | Allocations: 32889)


  
ActiveModel::UnknownAttributeError (unknown attribute 'sender_id' for AgencyTransaction.):
  
app/models/agency.rb:33:in `block in transfer'
app/models/agency.rb:23:in `transfer'
app/controllers/agencies_controller.rb:25:in `transfer'
Started POST "/agency/transfer" for ::1 at 2022-07-01 14:29:03 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>11000}, "agency"=>{}}
  [1m[36mAgency Load (1.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:18:in `transfer'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:19:in `transfer'
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:20:in `transfer'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/agency.rb:25:in `block in transfer'
  [1m[36mUserTransaction Create (2.0ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "transfer"], ["receiver_id", "d23ae364-be65-4d18-9693-bd139bb90ea2"], ["amount", -11000], ["code", "2817"], ["created_at", "2022-07-01 14:29:03.302257"], ["updated_at", "2022-07-01 14:29:03.302257"]]
  â†³ app/models/agency.rb:25:in `block in transfer'
  [1m[36mAgency Load (1.2ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:63:in `agency_cost'
  [1m[36mCost Load (3.0ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:63:in `agency_cost'
  [1m[36mCACHE Cost Load (0.0ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/agency.rb:23:in `transfer'
Completed 500 Internal Server Error in 116ms (ActiveRecord: 47.4ms | Allocations: 33302)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `sender_id`):
  
app/models/agency.rb:33:in `block in transfer'
app/models/agency.rb:23:in `transfer'
app/controllers/agencies_controller.rb:25:in `transfer'
Started POST "/agency/transfer" for ::1 at 2022-07-01 14:29:59 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>11000}, "agency"=>{}}
  [1m[36mAgency Load (1.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 8.8ms | Allocations: 3581)


  
RuntimeError (#<Agency id: "1e46709a-680f-4f8f-bd2d-db73f934e3b0", name: "Dudu agency", created_at: "2022-06-30 18:11:28.299747000 +0000", updated_at: "2022-06-30 18:11:28.299747000 +0000">):
  
app/controllers/agencies_controller.rb:26:in `transfer'
Started POST "/agency/transfer" for ::1 at 2022-07-01 14:30:19 +0000
Processing by AgenciesController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>11000}, "agency"=>{}}
  [1m[36mAgency Load (1.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:23:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:18:in `transfer'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:19:in `transfer'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:20:in `transfer'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/agency.rb:25:in `block in transfer'
  [1m[36mUserTransaction Create (2.1ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "transfer"], ["receiver_id", "d23ae364-be65-4d18-9693-bd139bb90ea2"], ["amount", -11000], ["code", "4144"], ["created_at", "2022-07-01 14:30:24.897238"], ["updated_at", "2022-07-01 14:30:24.897238"]]
  â†³ app/models/agency.rb:25:in `block in transfer'
  [1m[36mAgency Load (1.2ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:63:in `agency_cost'
  [1m[36mCost Load (1.6ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:63:in `agency_cost'
  [1m[36mCACHE Cost Load (0.0ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/agency.rb:23:in `transfer'
Completed 500 Internal Server Error in 361ms (ActiveRecord: 41.1ms | Allocations: 33301)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `sender_id`):
  
app/models/agency.rb:33:in `block in transfer'
app/models/agency.rb:23:in `transfer'
app/controllers/agencies_controller.rb:25:in `transfer'
  [1m[36mAgency Load (0.4ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" ORDER BY "agencies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAgency Load (0.6ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" ORDER BY "agencies"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAgency Load (2.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserTransaction Create (32.8ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "transfer"], ["receiver_id", "d23ae364-be65-4d18-9693-bd139bb90ea2"], ["amount", -2500], ["code", "9677"], ["created_at", "2022-07-01 14:33:14.568771"], ["updated_at", "2022-07-01 14:33:14.568771"]]
  [1m[36mAgency Load (0.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  [1m[36mCost Load (0.4ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  [1m[36mAgency Load (0.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  [1m[36mCost Load (0.3ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
Started POST "/users/transfer" for ::1 at 2022-07-01 14:42:40 +0000
Error occurred while parsing request parameters.
Contents:

{
    "transfe"
}
Processing by UsersController#transfer as */*
Completed 400 Bad Request in 14ms (Allocations: 1632)


  
ActionDispatch::Http::Parameters::ParseError (783: unexpected token at '{
    "transfe"
}'):
  
app/controllers/users_controller.rb:63:in `transfer_params'
app/controllers/users_controller.rb:31:in `transfer'
Started POST "/users/transfer" for ::1 at 2022-07-01 14:48:15 +0000
Processing by UsersController#transfer as */*
  Parameters: {"transfer"=>{"agency"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>2500}, "user"=>{}}
[31mUnpermitted parameter: :agency[0m
Completed 404 Not Found in 18ms (ActiveRecord: 70.3ms | Allocations: 1491)


  
ActiveRecord::RecordNotFound (Couldn't find Agency without an ID):
  
app/controllers/users_controller.rb:31:in `transfer'
Started POST "/users/transfer" for ::1 at 2022-07-01 14:48:50 +0000
Processing by UsersController#transfer as */*
  Parameters: {"transfer"=>{"agency"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>2500}, "user"=>{}}
[31mUnpermitted parameter: :agency[0m
Completed 404 Not Found in 18ms (ActiveRecord: 13.7ms | Allocations: 1950)


  
ActiveRecord::RecordNotFound (Couldn't find Agency without an ID):
  
app/controllers/users_controller.rb:31:in `transfer'
Started GET "/agencies" for ::1 at 2022-07-01 14:49:10 +0000
Processing by AgenciesController#index as */*
  [1m[36mAgency Load (2.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies"[0m
  â†³ app/controllers/agencies_controller.rb:5:in `index'
Completed 200 OK in 16ms (Views: 10.2ms | ActiveRecord: 5.5ms | Allocations: 4145)


Started POST "/users/transfer" for ::1 at 2022-07-01 14:49:33 +0000
Processing by UsersController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>2500}, "user"=>{}}
  [1m[36mAgency Load (1.2ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:31:in `transfer'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.3ms | Allocations: 2537)


  
RuntimeError (#<Agency id: "1e46709a-680f-4f8f-bd2d-db73f934e3b0", name: "Dudu agency", created_at: "2022-06-30 18:11:28.299747000 +0000", updated_at: "2022-06-30 18:11:28.299747000 +0000">):
  
app/controllers/users_controller.rb:32:in `transfer'
Started POST "/users/transfer" for ::1 at 2022-07-01 14:49:54 +0000
Processing by UsersController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>2500}, "user"=>{}}
  [1m[36mAgency Load (4.6ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:31:in `transfer'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/user.rb:21:in `transfer'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  â†³ app/models/user.rb:22:in `transfer'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mUserTransaction Create (30.5ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "transfer"], ["receiver_id", "d23ae364-be65-4d18-9693-bd139bb90ea2"], ["amount", -2500], ["code", "6317"], ["created_at", "2022-07-01 14:49:54.207422"], ["updated_at", "2022-07-01 14:49:54.207422"]]
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mAgency Load (1.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/user.rb:55:in `agency_cost'
  [1m[36mCost Load (1.5ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/user.rb:25:in `transfer'
Completed 500 Internal Server Error in 191ms (ActiveRecord: 77.2ms | Allocations: 26940)


  
ArgumentError (wrong number of arguments (given 0, expected 1)):
  
app/models/user.rb:54:in `agency_cost'
app/models/user.rb:39:in `block in transfer'
app/models/user.rb:25:in `transfer'
app/controllers/users_controller.rb:34:in `transfer'
Started POST "/users/transfer" for ::1 at 2022-07-01 14:50:22 +0000
Processing by UsersController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>2500}, "user"=>{}}
  [1m[36mAgency Load (1.1ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:31:in `transfer'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/user.rb:21:in `transfer'
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  â†³ app/models/user.rb:22:in `transfer'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mUserTransaction Create (2.1ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "transfer"], ["receiver_id", "d23ae364-be65-4d18-9693-bd139bb90ea2"], ["amount", -2500], ["code", "8016"], ["created_at", "2022-07-01 14:50:26.689546"], ["updated_at", "2022-07-01 14:50:26.689546"]]
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mAgency Load (1.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/user.rb:55:in `agency_cost'
  [1m[36mCost Load (1.7ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/user.rb:55:in `agency_cost'
  [1m[36mCACHE Cost Load (0.0ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/user.rb:25:in `transfer'
Completed 500 Internal Server Error in 419ms (ActiveRecord: 44.0ms | Allocations: 33551)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `sender_id`):
  
app/models/user.rb:33:in `block in transfer'
app/models/user.rb:25:in `transfer'
app/controllers/users_controller.rb:34:in `transfer'
Started POST "/users/transfer" for ::1 at 2022-07-01 14:55:31 +0000
Processing by UsersController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>2500}, "user"=>{}}
  [1m[36mAgency Load (1.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:31:in `transfer'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/user.rb:21:in `transfer'
  [1m[36mUser Load (7.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  â†³ app/models/user.rb:22:in `transfer'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mUserTransaction Create (54.7ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "transfer"], ["receiver_id", "d23ae364-be65-4d18-9693-bd139bb90ea2"], ["amount", -2500], ["code", "740"], ["created_at", "2022-07-01 14:55:36.696593"], ["updated_at", "2022-07-01 14:55:36.696593"]]
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/user.rb:25:in `transfer'
Completed 500 Internal Server Error in 196ms (ActiveRecord: 217.4ms | Allocations: 17033)


  
RuntimeError (#<Agency id: "1e46709a-680f-4f8f-bd2d-db73f934e3b0", name: "Dudu agency", created_at: "2022-06-30 18:11:28.299747000 +0000", updated_at: "2022-06-30 18:11:28.299747000 +0000">):
  
app/models/user.rb:33:in `block in transfer'
app/models/user.rb:25:in `transfer'
app/controllers/users_controller.rb:34:in `transfer'
Started POST "/users/transfer" for ::1 at 2022-07-01 14:56:08 +0000
Processing by UsersController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>2500}, "user"=>{}}
  [1m[36mAgency Load (1.8ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:31:in `transfer'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `transfer'
  [1m[36mCACHE Agency Load (0.1ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/user.rb:21:in `transfer'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  â†³ app/models/user.rb:22:in `transfer'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mUserTransaction Create (2.5ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "transfer"], ["receiver_id", "d23ae364-be65-4d18-9693-bd139bb90ea2"], ["amount", -2500], ["code", "6195"], ["created_at", "2022-07-01 14:56:08.717400"], ["updated_at", "2022-07-01 14:56:08.717400"]]
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mAgencyTransaction Load (2.0ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 11]]
  â†³ app/models/user.rb:33:in `block in transfer'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/user.rb:25:in `transfer'
Completed 500 Internal Server Error in 104ms (ActiveRecord: 35.2ms | Allocations: 22640)


  
RuntimeError (#<ActiveRecord::Associations::CollectionProxy []>):
  
app/models/user.rb:33:in `block in transfer'
app/models/user.rb:25:in `transfer'
app/controllers/users_controller.rb:34:in `transfer'
Started POST "/users/transfer" for ::1 at 2022-07-01 14:56:33 +0000
Processing by UsersController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>2500}, "user"=>{}}
  [1m[36mAgency Load (1.8ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:31:in `transfer'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/user.rb:21:in `transfer'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  â†³ app/models/user.rb:22:in `transfer'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mUserTransaction Create (3.9ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "transfer"], ["receiver_id", "d23ae364-be65-4d18-9693-bd139bb90ea2"], ["amount", -2500], ["code", "1131"], ["created_at", "2022-07-01 14:56:33.322123"], ["updated_at", "2022-07-01 14:56:33.322123"]]
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/user.rb:25:in `transfer'
Completed 500 Internal Server Error in 71ms (ActiveRecord: 31.0ms | Allocations: 19277)


  
RuntimeError (#<User id: "9c984312-37ee-4cc2-9933-520a4790eb07", name: "Albert", number: "0102030405", created_at: "2022-06-30 18:11:40.676958000 +0000", updated_at: "2022-06-30 18:11:40.676958000 +0000">):
  
app/models/user.rb:33:in `block in transfer'
app/models/user.rb:25:in `transfer'
app/controllers/users_controller.rb:34:in `transfer'
Started POST "/users/transfer" for ::1 at 2022-07-01 14:59:30 +0000
Processing by UsersController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>2500}, "user"=>{}}
  [1m[36mAgency Load (2.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:31:in `transfer'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/user.rb:21:in `transfer'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  â†³ app/models/user.rb:22:in `transfer'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mUserTransaction Create (4.4ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "transfer"], ["receiver_id", "d23ae364-be65-4d18-9693-bd139bb90ea2"], ["amount", -2500], ["code", "5265"], ["created_at", "2022-07-01 14:59:30.416265"], ["updated_at", "2022-07-01 14:59:30.416265"]]
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mAgency Load (1.2ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/user.rb:56:in `agency_cost'
  [1m[36mCost Load (3.0ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/user.rb:56:in `agency_cost'
  [1m[36mCACHE Cost Load (0.0ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/user.rb:25:in `transfer'
Completed 500 Internal Server Error in 130ms (ActiveRecord: 50.8ms | Allocations: 33569)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `sender_id`):
  
app/models/user.rb:34:in `block in transfer'
app/models/user.rb:25:in `transfer'
app/controllers/users_controller.rb:34:in `transfer'
Started POST "/users/transfer" for ::1 at 2022-07-01 15:00:34 +0000
Processing by UsersController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>2500}, "user"=>{}}
  [1m[36mAgency Load (5.6ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:31:in `transfer'
  [1m[36mUser Load (13.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/user.rb:21:in `transfer'
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  â†³ app/models/user.rb:22:in `transfer'
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mUserTransaction Create (2.8ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "transfer"], ["receiver_id", "d23ae364-be65-4d18-9693-bd139bb90ea2"], ["amount", -2500], ["code", "8483"], ["created_at", "2022-07-01 15:00:38.475681"], ["updated_at", "2022-07-01 15:00:38.475681"]]
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mAgency Load (1.2ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/user.rb:56:in `agency_cost'
  [1m[36mCost Load (1.4ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/user.rb:56:in `agency_cost'
  [1m[36mCACHE Cost Load (0.0ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/user.rb:25:in `transfer'
Completed 500 Internal Server Error in 382ms (ActiveRecord: 75.6ms | Allocations: 33101)


  
ActiveModel::UnknownAttributeError (unknown attribute 'sender_id' for AgencyTransaction.):
  
app/models/user.rb:34:in `block in transfer'
app/models/user.rb:25:in `transfer'
app/controllers/users_controller.rb:34:in `transfer'
Started POST "/users/transfer" for ::1 at 2022-07-01 15:01:07 +0000
Processing by UsersController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender_id"=>"0102030405", "receiver"=>"0770077007", "amount"=>2500}, "user"=>{}}
[31mUnpermitted parameter: :sender_id[0m
  [1m[36mAgency Load (2.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:31:in `transfer'
[31mUnpermitted parameter: :sender_id[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `transfer'
[31mUnpermitted parameter: :sender_id[0m
[31mUnpermitted parameter: :sender_id[0m
Completed 500 Internal Server Error in 24ms (ActiveRecord: 12.4ms | Allocations: 6875)


  
NoMethodError (undefined method `transfer' for nil:NilClass):
  
app/controllers/users_controller.rb:34:in `transfer'
Started POST "/users/transfer" for ::1 at 2022-07-01 15:01:19 +0000
Processing by UsersController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0", "sender"=>"0102030405", "receiver"=>"0770077007", "amount"=>2500}, "user"=>{}}
  [1m[36mAgency Load (1.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:31:in `transfer'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/user.rb:21:in `transfer'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0770077007"], ["LIMIT", 1]]
  â†³ app/models/user.rb:22:in `transfer'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mUserTransaction Create (2.0ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "9c984312-37ee-4cc2-9933-520a4790eb07"], ["type_of", "transfer"], ["receiver_id", "d23ae364-be65-4d18-9693-bd139bb90ea2"], ["amount", -2500], ["code", "7302"], ["created_at", "2022-07-01 15:01:19.804414"], ["updated_at", "2022-07-01 15:01:19.804414"]]
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mAgency Load (2.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/user.rb:56:in `agency_cost'
  [1m[36mCost Load (1.4ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/user.rb:56:in `agency_cost'
  [1m[36mCACHE Cost Load (0.0ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/user.rb:25:in `transfer'
Completed 500 Internal Server Error in 109ms (ActiveRecord: 46.2ms | Allocations: 30310)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `sender_id`):
  
app/models/user.rb:34:in `block in transfer'
app/models/user.rb:25:in `transfer'
app/controllers/users_controller.rb:34:in `transfer'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (42.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (5065.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_development"[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (5079.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_development"[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (5014.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_development"[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (5014.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_development"[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (5059.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_development"[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (5012.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_development"[0m
  [1m[35m (97.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (36.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (543.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_development"[0m
  [1m[35m (311.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_test"[0m
  [1m[35m (1800.8ms)[0m  [1m[35mCREATE DATABASE "money_tf_development" ENCODING = 'unicode'[0m
  [1m[35m (874.2ms)[0m  [1m[35mCREATE DATABASE "money_tf_test" ENCODING = 'unicode'[0m
  [1m[35m (155.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (99.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5765488955715387570)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to EnablePgCrypto (20220623113514)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (158.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto"[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220623113514"]]
  [1m[36mTRANSACTION (17.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20220629140930)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (93.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "number" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629140930"]]
  [1m[36mTRANSACTION (23.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAgencies (20220629141040)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (87.7ms)[0m  [1m[35mCREATE TABLE "agencies" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141040"]]
  [1m[36mTRANSACTION (21.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCosts (20220629141113)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (62.0ms)[0m  [1m[35mCREATE TABLE "costs" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "amount" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_27278fdb3e"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (46.6ms)[0m  [1m[35mCREATE INDEX "index_costs_on_agency_id" ON "costs" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141113"]]
  [1m[36mTRANSACTION (16.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUserTransactions (20220629141348)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (98.9ms)[0m  [1m[35mCREATE TABLE "user_transactions" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "user_id" uuid, "type_of" character varying, "receiver_id" uuid, "amount" integer, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_e0527492c6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_d80181d2f2"
FOREIGN KEY ("receiver_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (59.3ms)[0m  [1m[35mCREATE INDEX "index_user_transactions_on_user_id" ON "user_transactions" ("user_id")[0m
  [1m[35m (48.5ms)[0m  [1m[35mCREATE INDEX "index_user_transactions_on_receiver_id" ON "user_transactions" ("receiver_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141348"]]
  [1m[36mTRANSACTION (22.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAgencyTransactions (20220629141547)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (115.4ms)[0m  [1m[35mCREATE TABLE "agency_transactions" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "type_of" character varying, "sender" character varying, "receiver" character varying, "amount" integer, "fee" integer DEFAULT 0, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f21bb2ac60"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (39.6ms)[0m  [1m[35mCREATE INDEX "index_agency_transactions_on_agency_id" ON "agency_transactions" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141547"]]
  [1m[36mTRANSACTION (22.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (9.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-07-01 15:27:09.832558"], ["updated_at", "2022-07-01 15:27:09.832558"]]
  [1m[36mTRANSACTION (16.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(5765488955715387570)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/users/create" for ::1 at 2022-07-01 15:27:48 +0000
  [1m[35m (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Jean", "number"=>"0102030405"}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Create (3.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Jean"], ["number", "0102030405"], ["created_at", "2022-07-01 15:27:49.817321"], ["updated_at", "2022-07-01 15:27:49.817321"]]
  â†³ app/controllers/users_controller.rb:11:in `create'
  [1m[36mTRANSACTION (25.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:11:in `create'
Completed 200 OK in 102ms (Views: 0.5ms | ActiveRecord: 36.1ms | Allocations: 8124)


Started POST "/users/create" for ::1 at 2022-07-01 15:28:05 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Marion", "number"=>"0504030201"}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Marion"], ["number", "0504030201"], ["created_at", "2022-07-01 15:28:05.082815"], ["updated_at", "2022-07-01 15:28:05.082815"]]
  â†³ app/controllers/users_controller.rb:11:in `create'
  [1m[36mTRANSACTION (21.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:11:in `create'
Completed 200 OK in 32ms (Views: 0.3ms | ActiveRecord: 24.9ms | Allocations: 4369)


Started POST "/agencies/create" for ::1 at 2022-07-01 15:28:11 +0000
Processing by AgenciesController#create as */*
  Parameters: {"agency"=>{"name"=>"Dudu agency", "cost"=>800}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/agencies_controller.rb:9:in `create'
  [1m[36mAgency Create (2.2ms)[0m  [1m[32mINSERT INTO "agencies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Dudu agency"], ["created_at", "2022-07-01 15:28:11.856111"], ["updated_at", "2022-07-01 15:28:11.856111"]]
  â†³ app/controllers/agencies_controller.rb:9:in `create'
  [1m[36mTRANSACTION (14.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/agencies_controller.rb:9:in `create'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/agencies_controller.rb:10:in `create'
  [1m[36mAgency Load (1.6ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:10:in `create'
  [1m[36mCost Create (1.9ms)[0m  [1m[32mINSERT INTO "costs" ("agency_id", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["amount", 800], ["created_at", "2022-07-01 15:28:12.026092"], ["updated_at", "2022-07-01 15:28:12.026092"]]
  â†³ app/controllers/agencies_controller.rb:10:in `create'
  [1m[36mTRANSACTION (15.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/agencies_controller.rb:10:in `create'
Completed 200 OK in 206ms (Views: 0.5ms | ActiveRecord: 51.9ms | Allocations: 18951)


Started GET "/users" for ::1 at 2022-07-01 15:28:17 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 6ms (Views: 3.6ms | ActiveRecord: 1.4ms | Allocations: 1969)


Started GET "/agencies" for ::1 at 2022-07-01 15:28:25 +0000
Processing by AgenciesController#index as */*
  [1m[36mAgency Load (1.6ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies"[0m
  â†³ app/controllers/agencies_controller.rb:5:in `index'
Completed 200 OK in 7ms (Views: 4.5ms | ActiveRecord: 1.6ms | Allocations: 1841)


Started GET "/user/sold" for ::1 at 2022-07-01 15:28:31 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `user'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "52a35235-1126-467d-b9cc-1ea865dcc259"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 71ms (Views: 0.6ms | ActiveRecord: 5.8ms | Allocations: 8984)


Started GET "/user/transactions" for ::1 at 2022-07-01 15:28:36 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `user'
  [1m[36mUserTransaction Load (2.2ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "52a35235-1126-467d-b9cc-1ea865dcc259"]]
  â†³ app/controllers/users_controller.rb:21:in `transactions'
Completed 200 OK in 32ms (Views: 3.8ms | ActiveRecord: 6.8ms | Allocations: 3799)


Started GET "/agency/sold" for ::1 at 2022-07-01 15:28:41 +0000
Processing by AgenciesController#sold as */*
  Parameters: {"agency"=>{"id"=>"1e46709a-680f-4f8f-bd2d-db73f934e3b0"}}
  [1m[36mAgency Load (2.6ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "1e46709a-680f-4f8f-bd2d-db73f934e3b0"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
Completed 404 Not Found in 8ms (ActiveRecord: 2.6ms | Allocations: 1930)


  
ActiveRecord::RecordNotFound (Couldn't find Agency with 'id'=1e46709a-680f-4f8f-bd2d-db73f934e3b0):
  
app/controllers/agencies_controller.rb:34:in `agency'
app/controllers/agencies_controller.rb:15:in `sold'
Started GET "/agency/sold" for ::1 at 2022-07-01 15:29:17 +0000
Processing by AgenciesController#sold as */*
  Parameters: {"agency"=>{"id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f"}}
  [1m[36mAgency Load (2.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "agency_transactions"."amount" FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"]]
  â†³ app/models/agency.rb:6:in `sold'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "agency_transactions"."fee" FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"]]
  â†³ app/models/agency.rb:14:in `fees'
Completed 200 OK in 56ms (Views: 0.5ms | ActiveRecord: 9.0ms | Allocations: 9908)


Started GET "/agency/transactions" for ::1 at 2022-07-01 15:29:39 +0000
Processing by AgenciesController#transactions as */*
  Parameters: {"agency"=>{"id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f"}}
  [1m[36mAgency Load (2.2ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[36mAgencyTransaction Load (1.6ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"]]
  â†³ app/controllers/agencies_controller.rb:19:in `transactions'
Completed 200 OK in 12ms (Views: 3.2ms | ActiveRecord: 3.8ms | Allocations: 3380)


Started POST "/users/deposit" for ::1 at 2022-07-01 15:29:55 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>{"number"=>"0102030405", "amount"=>15000}, "user"=>{}}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:25:in `deposit'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:14:in `deposit'
  [1m[36mUserTransaction Create (2.2ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", "52a35235-1126-467d-b9cc-1ea865dcc259"], ["type_of", "deposit"], ["amount", 15000], ["created_at", "2022-07-01 15:29:55.560808"], ["updated_at", "2022-07-01 15:29:55.560808"]]
  â†³ app/models/user.rb:14:in `deposit'
  [1m[36mTRANSACTION (28.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:14:in `deposit'
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "52a35235-1126-467d-b9cc-1ea865dcc259"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 62ms (Views: 0.6ms | ActiveRecord: 39.0ms | Allocations: 10565)


Started POST "/users/deposit" for ::1 at 2022-07-01 15:30:03 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>{"number"=>"0102030405", "amount"=>2000}, "user"=>{}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:25:in `deposit'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:14:in `deposit'
  [1m[36mUserTransaction Create (1.9ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", "52a35235-1126-467d-b9cc-1ea865dcc259"], ["type_of", "deposit"], ["amount", 2000], ["created_at", "2022-07-01 15:30:03.656985"], ["updated_at", "2022-07-01 15:30:03.656985"]]
  â†³ app/models/user.rb:14:in `deposit'
  [1m[36mTRANSACTION (47.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:14:in `deposit'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "52a35235-1126-467d-b9cc-1ea865dcc259"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 64ms (Views: 0.4ms | ActiveRecord: 53.1ms | Allocations: 6385)


Started POST "/users/transfer" for ::1 at 2022-07-01 15:31:34 +0000
Processing by UsersController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f", "sender"=>"0102030405", "receiver"=>"0504030201", "amount"=>2500}, "user"=>{}}
  [1m[36mAgency Load (1.8ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:31:in `transfer'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/user.rb:21:in `transfer'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/models/user.rb:22:in `transfer'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mUserTransaction Create (1.8ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "52a35235-1126-467d-b9cc-1ea865dcc259"], ["type_of", "transfer"], ["receiver_id", "115b5c78-95c1-4598-9d3e-a63275fbcf42"], ["amount", -2500], ["code", "5349"], ["created_at", "2022-07-01 15:31:35.012338"], ["updated_at", "2022-07-01 15:31:35.012338"]]
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mAgency Load (1.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/user.rb:56:in `agency_cost'
  [1m[36mCost Load (1.9ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/user.rb:56:in `agency_cost'
  [1m[36mCACHE Cost Load (0.0ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/user.rb:25:in `transfer'
Completed 500 Internal Server Error in 50ms (ActiveRecord: 15.4ms | Allocations: 15969)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `sender_id`):
  
app/models/user.rb:34:in `block in transfer'
app/models/user.rb:25:in `transfer'
app/controllers/users_controller.rb:34:in `transfer'
Started POST "/users/transfer" for ::1 at 2022-07-01 15:38:53 +0000
Processing by UsersController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f", "sender"=>"0102030405", "receiver"=>"0504030201", "amount"=>2500}, "user"=>{}}
  [1m[36mAgency Load (1.2ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:31:in `transfer'
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/user.rb:21:in `transfer'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/models/user.rb:22:in `transfer'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mUserTransaction Create (26.0ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "52a35235-1126-467d-b9cc-1ea865dcc259"], ["type_of", "transfer"], ["receiver_id", "115b5c78-95c1-4598-9d3e-a63275fbcf42"], ["amount", -2500], ["code", "914"], ["created_at", "2022-07-01 15:38:53.965059"], ["updated_at", "2022-07-01 15:38:53.965059"]]
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mAgency Load (2.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/user.rb:56:in `agency_cost'
  [1m[36mCost Load (1.5ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/user.rb:56:in `agency_cost'
  [1m[36mCACHE Cost Load (0.0ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/user.rb:25:in `transfer'
Completed 500 Internal Server Error in 145ms (ActiveRecord: 52.2ms | Allocations: 28177)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `sender_id`):
  
app/models/user.rb:34:in `block in transfer'
app/models/user.rb:25:in `transfer'
app/controllers/users_controller.rb:34:in `transfer'
Started POST "/users/transfer" for ::1 at 2022-07-01 15:39:40 +0000
Processing by UsersController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f", "sender"=>"0102030405", "receiver"=>"0504030201", "amount"=>2500}, "user"=>{}}
  [1m[36mAgency Load (2.2ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:31:in `transfer'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/user.rb:21:in `transfer'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/models/user.rb:22:in `transfer'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mUserTransaction Create (2.4ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "52a35235-1126-467d-b9cc-1ea865dcc259"], ["type_of", "transfer"], ["receiver_id", "115b5c78-95c1-4598-9d3e-a63275fbcf42"], ["amount", -2500], ["code", "8585"], ["created_at", "2022-07-01 15:39:40.669495"], ["updated_at", "2022-07-01 15:39:40.669495"]]
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mAgency Load (2.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/user.rb:56:in `agency_cost'
  [1m[36mCost Load (1.2ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/user.rb:56:in `agency_cost'
  [1m[36mCACHE Cost Load (0.0ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mAgencyTransaction Create (22.6ms)[0m  [1m[32mINSERT INTO "agency_transactions" ("agency_id", "type_of", "sender", "receiver", "amount", "fee", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["type_of", "transfer"], ["sender", "#<User:0x000055978b76bd80>"], ["receiver", "#<User:0x000055978b44aa20>"], ["amount", 1700], ["fee", 800], ["code", "8585"], ["created_at", "2022-07-01 15:39:40.783942"], ["updated_at", "2022-07-01 15:39:40.783942"]]
  â†³ app/models/user.rb:34:in `block in transfer'
  [1m[36mTRANSACTION (45.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:25:in `transfer'
Completed 200 OK in 256ms (Views: 0.3ms | ActiveRecord: 119.5ms | Allocations: 34193)


Started GET "/agency/transactions" for ::1 at 2022-07-01 15:39:50 +0000
Processing by AgenciesController#transactions as */*
  Parameters: {"agency"=>{"id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f"}}
  [1m[36mAgency Load (2.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[36mAgencyTransaction Load (1.8ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"]]
  â†³ app/controllers/agencies_controller.rb:19:in `transactions'
Completed 200 OK in 17ms (Views: 5.9ms | ActiveRecord: 4.1ms | Allocations: 3584)


Started GET "/agency/sold" for ::1 at 2022-07-01 15:40:37 +0000
Processing by AgenciesController#sold as */*
  Parameters: {"agency"=>{"id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f"}}
  [1m[36mAgency Load (1.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[35m (2.4ms)[0m  [1m[34mSELECT "agency_transactions"."amount" FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"]]
  â†³ app/models/agency.rb:6:in `sold'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "agency_transactions"."fee" FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"]]
  â†³ app/models/agency.rb:14:in `fees'
Completed 200 OK in 18ms (Views: 0.4ms | ActiveRecord: 5.2ms | Allocations: 4490)


Started GET "/user/sold" for ::1 at 2022-07-01 15:41:00 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `user'
  [1m[35m (14.0ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "52a35235-1126-467d-b9cc-1ea865dcc259"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 25ms (Views: 0.5ms | ActiveRecord: 15.6ms | Allocations: 3469)


Started GET "/user/sold" for ::1 at 2022-07-01 15:41:16 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"number"=>"0504030201"}}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `user'
  [1m[35m (3.4ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "115b5c78-95c1-4598-9d3e-a63275fbcf42"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 56ms (Views: 0.4ms | ActiveRecord: 5.3ms | Allocations: 3458)


Started GET "/user/transactions" for ::1 at 2022-07-01 15:41:53 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `user'
  [1m[36mUserTransaction Load (1.6ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "52a35235-1126-467d-b9cc-1ea865dcc259"]]
  â†³ app/controllers/users_controller.rb:21:in `transactions'
Completed 200 OK in 17ms (Views: 4.9ms | ActiveRecord: 3.9ms | Allocations: 4156)


Started GET "/user/transactions" for ::1 at 2022-07-01 16:15:32 +0000
  
SyntaxError (/home/mederic/formation_others/money_tf/app/controllers/users_controller.rb:39: syntax error, unexpected ')', expecting =>
...cy_id], withdraw_params[:code])
...                              ^
/home/mederic/formation_others/money_tf/app/controllers/users_controller.rb:40: syntax error, unexpected ')', expecting =>
...cy_id], withdraw_params[:code])
...                              ^
):
  
app/controllers/users_controller.rb:39: syntax error, unexpected ')', expecting =>
app/controllers/users_controller.rb:40: syntax error, unexpected ')', expecting =>
app/controllers/users_controller.rb:39: syntax error, unexpected ')', expecting =>
app/controllers/users_controller.rb:40: syntax error, unexpected ')', expecting =>
app/controllers/users_controller.rb:39: syntax error, unexpected ')', expecting =>
app/controllers/users_controller.rb:40: syntax error, unexpected ')', expecting =>
Started GET "/user/transactions" for ::1 at 2022-07-01 16:16:15 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"number"=>"0504030201"}}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:47:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:47:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:47:in `user'
  [1m[36mUserTransaction Load (2.0ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "115b5c78-95c1-4598-9d3e-a63275fbcf42"]]
  â†³ app/controllers/users_controller.rb:21:in `transactions'
Completed 200 OK in 222ms (Views: 4.2ms | ActiveRecord: 131.4ms | Allocations: 13623)


Started GET "/agency/transactions" for ::1 at 2022-07-01 16:16:31 +0000
Processing by AgenciesController#transactions as */*
  Parameters: {"agency"=>{"id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f"}}
  [1m[36mAgency Load (2.8ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[36mAgencyTransaction Load (1.7ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"]]
  â†³ app/controllers/agencies_controller.rb:19:in `transactions'
Completed 200 OK in 44ms (Views: 13.1ms | ActiveRecord: 4.6ms | Allocations: 10162)


Started POST "/users/withdraw" for ::1 at 2022-07-01 16:17:20 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f", "code"=>"8585"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (1.8ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 /* loading for inspect */ LIMIT $3[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["code", "8585"], ["LIMIT", 11]]
  â†³ app/controllers/users_controller.rb:41:in `withdraw'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 1.8ms | Allocations: 2354)


  
RuntimeError (#<ActiveRecord::Relation [#<AgencyTransaction id: "b4250888-a382-4a34-a68c-4729c6ee8917", agency_id: "e6222b53-8c92-49ed-93e2-e4fbc844a18f", type_of: "transfer", sender: "#<User:0x000055978b76bd80>", receiver: "#<User:0x000055978b44aa20>", amount: 1700, fee: 800, code: "8585", created_at: "2022-07-01 15:39:40.783942000 +0000", updated_at: "2022-07-01 15:39:40.783942000 +0000">]>):
  
app/controllers/users_controller.rb:41:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-01 16:25:06 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f", "code"=>"8585"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (2.7ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["code", "8585"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `withdraw'
Completed 500 Internal Server Error in 96ms (ActiveRecord: 195.1ms | Allocations: 7521)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ERROR:  column user_transactions.agency_id does not exist
LINE 1: ...er_transactions".* FROM "user_transactions" WHERE "user_tran...
                                                             ^
):
  
app/controllers/users_controller.rb:40:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-01 16:26:11 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f", "code"=>"8585"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (1.7ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["code", "8585"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `withdraw'
  [1m[36mUserTransaction Load (1.7ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."code" = $1 LIMIT $2[0m  [["code", "8585"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `withdraw'
Completed 500 Internal Server Error in 70ms (ActiveRecord: 69.0ms | Allocations: 12677)


  
RuntimeError (#<AgencyTransaction id: "b4250888-a382-4a34-a68c-4729c6ee8917", agency_id: "e6222b53-8c92-49ed-93e2-e4fbc844a18f", type_of: "transfer", sender: "#<User:0x000055978b76bd80>", receiver: "#<User:0x000055978b44aa20>", amount: 1700, fee: 800, code: "8585", created_at: "2022-07-01 15:39:40.783942000 +0000", updated_at: "2022-07-01 15:39:40.783942000 +0000">):
  
app/controllers/users_controller.rb:41:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-01 16:26:23 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f", "code"=>"8585"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (1.8ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["code", "8585"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `withdraw'
  [1m[36mUserTransaction Load (1.9ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."code" = $1 LIMIT $2[0m  [["code", "8585"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `withdraw'
Completed 500 Internal Server Error in 60ms (ActiveRecord: 26.3ms | Allocations: 12661)


  
RuntimeError (#<UserTransaction id: "fbc0fa10-ecdc-40f2-930c-a33b3f68a759", user_id: "52a35235-1126-467d-b9cc-1ea865dcc259", type_of: "transfer", receiver_id: "115b5c78-95c1-4598-9d3e-a63275fbcf42", amount: -2500, code: "8585", created_at: "2022-07-01 15:39:40.669495000 +0000", updated_at: "2022-07-01 15:39:40.669495000 +0000">):
  
app/controllers/users_controller.rb:42:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-01 16:27:05 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f", "code"=>"8585"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (1.4ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["code", "8585"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `withdraw'
  [1m[36mUserTransaction Load (1.5ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."code" = $1 LIMIT $2[0m  [["code", "8585"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `withdraw'
Completed 500 Internal Server Error in 44ms (ActiveRecord: 16.1ms | Allocations: 12600)


  
RuntimeError ("#<User:0x000055978b44aa20>"):
  
app/controllers/users_controller.rb:43:in `withdraw'
Started GET "/users" for ::1 at 2022-07-04 09:16:15 +0000
  [1m[35m (65.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#index as */*
  [1m[36mUser Load (141.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 371ms (Views: 16.8ms | ActiveRecord: 162.3ms | Allocations: 7396)


Started POST "/users/withdraw" for ::1 at 2022-07-04 09:17:25 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f", "code"=>"8585"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (77.5ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["code", "8585"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `withdraw'
  [1m[36mUserTransaction Load (24.5ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."code" = $1 LIMIT $2[0m  [["code", "8585"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `withdraw'
Completed 500 Internal Server Error in 252ms (ActiveRecord: 123.4ms | Allocations: 14251)


  
RuntimeError (#<AgencyTransaction id: "b4250888-a382-4a34-a68c-4729c6ee8917", agency_id: "e6222b53-8c92-49ed-93e2-e4fbc844a18f", type_of: "transfer", sender: "#<User:0x000055978b76bd80>", receiver: "#<User:0x000055978b44aa20>", amount: 1700, fee: 800, code: "8585", created_at: "2022-07-01 15:39:40.783942000 +0000", updated_at: "2022-07-01 15:39:40.783942000 +0000">):
  
app/controllers/users_controller.rb:42:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-04 09:17:45 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f", "code"=>"8585"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (2.1ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["code", "8585"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `withdraw'
  [1m[36mUserTransaction Load (1.4ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."code" = $1 LIMIT $2[0m  [["code", "8585"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `withdraw'
Completed 500 Internal Server Error in 60ms (ActiveRecord: 26.3ms | Allocations: 12738)


  
RuntimeError ("#<User:0x000055978b44aa20>"):
  
app/controllers/users_controller.rb:42:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-04 09:17:52 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f", "code"=>"8585"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (2.0ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["code", "8585"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `withdraw'
  [1m[36mUserTransaction Load (1.4ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."code" = $1 LIMIT $2[0m  [["code", "8585"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `withdraw'
Completed 500 Internal Server Error in 65ms (ActiveRecord: 24.4ms | Allocations: 13790)


  
NoMethodError (undefined method `number' for "#<User:0x000055978b44aa20>":String):
  
app/controllers/users_controller.rb:42:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-04 09:18:38 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f", "code"=>"8585"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (9.6ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["code", "8585"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `withdraw'
  [1m[36mUserTransaction Load (1.2ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."code" = $1 LIMIT $2[0m  [["code", "8585"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `withdraw'
Completed 500 Internal Server Error in 75ms (ActiveRecord: 35.5ms | Allocations: 12598)


  
RuntimeError ("#<User:0x000055978b44aa20>"):
  
app/controllers/users_controller.rb:42:in `withdraw'
Started POST "/users/transfer" for ::1 at 2022-07-04 09:54:28 +0000
Processing by UsersController#transfer as */*
  Parameters: {"transfer"=>{"agency_id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f", "sender"=>"0102030405", "receiver"=>"0504030201", "amount"=>3000}, "user"=>{}}
  [1m[36mAgency Load (90.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:31:in `transfer'
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:32:in `transfer'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/user.rb:21:in `transfer'
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/models/user.rb:22:in `transfer'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mUserTransaction Create (217.0ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver_id", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "52a35235-1126-467d-b9cc-1ea865dcc259"], ["type_of", "transfer"], ["receiver_id", "115b5c78-95c1-4598-9d3e-a63275fbcf42"], ["amount", -3000], ["code", "3094"], ["created_at", "2022-07-04 09:54:29.753006"], ["updated_at", "2022-07-04 09:54:29.753006"]]
  â†³ app/models/user.rb:26:in `block in transfer'
  [1m[36mAgency Load (2.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/user.rb:78:in `agency_cost'
  [1m[36mCost Load (78.9ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/user.rb:78:in `agency_cost'
  [1m[36mCACHE Cost Load (0.0ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/models/agency.rb:50:in `tarif'
  [1m[36mAgencyTransaction Create (21.7ms)[0m  [1m[32mINSERT INTO "agency_transactions" ("agency_id", "type_of", "sender", "receiver", "amount", "fee", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["type_of", "transfer"], ["sender", "#<User:0x00007f46acb81a60>"], ["receiver", "#<User:0x00007f46acad9798>"], ["amount", 2200], ["fee", 800], ["code", "3094"], ["created_at", "2022-07-04 09:54:30.150945"], ["updated_at", "2022-07-04 09:54:30.150945"]]
  â†³ app/models/user.rb:34:in `block in transfer'
  [1m[36mTRANSACTION (35.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:25:in `transfer'
  [1m[36mUserTransaction Load (1.5ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "52a35235-1126-467d-b9cc-1ea865dcc259"]]
  â†³ app/controllers/users_controller.rb:35:in `transfer'
Completed 200 OK in 888ms (Views: 8.1ms | ActiveRecord: 758.7ms | Allocations: 36533)


Started GET "/user/transactions" for ::1 at 2022-07-04 09:54:55 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"number"=>"0504030201"}}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[36mUserTransaction Load (2.4ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "115b5c78-95c1-4598-9d3e-a63275fbcf42"]]
  â†³ app/controllers/users_controller.rb:21:in `transactions'
Completed 200 OK in 13ms (Views: 3.2ms | ActiveRecord: 3.9ms | Allocations: 3636)


Started GET "/user/transactions" for ::1 at 2022-07-04 09:55:07 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[36mUserTransaction Load (2.1ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "52a35235-1126-467d-b9cc-1ea865dcc259"]]
  â†³ app/controllers/users_controller.rb:21:in `transactions'
Completed 200 OK in 17ms (Views: 5.9ms | ActiveRecord: 3.8ms | Allocations: 4105)


Started GET "/agency/transactions" for ::1 at 2022-07-04 09:55:32 +0000
Processing by AgenciesController#transactions as */*
  Parameters: {"agency"=>{"id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f"}}
  [1m[36mAgency Load (1.8ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[36mAgencyTransaction Load (141.9ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"]]
  â†³ app/controllers/agencies_controller.rb:19:in `transactions'
Completed 200 OK in 154ms (Views: 5.3ms | ActiveRecord: 143.7ms | Allocations: 3740)


  [1m[35m (15.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (70.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (700.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_development"[0m
  [1m[35m (463.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "money_tf_test"[0m
  [1m[35m (2457.9ms)[0m  [1m[35mCREATE DATABASE "money_tf_development" ENCODING = 'unicode'[0m
  [1m[35m (995.6ms)[0m  [1m[35mCREATE DATABASE "money_tf_test" ENCODING = 'unicode'[0m
  [1m[35m (153.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (105.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5765488955715387570)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to EnablePgCrypto (20220623113514)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (100.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto"[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220623113514"]]
  [1m[36mTRANSACTION (11.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20220629140930)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (115.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "number" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629140930"]]
  [1m[36mTRANSACTION (19.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAgencies (20220629141040)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (91.1ms)[0m  [1m[35mCREATE TABLE "agencies" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141040"]]
  [1m[36mTRANSACTION (19.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCosts (20220629141113)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (48.5ms)[0m  [1m[35mCREATE TABLE "costs" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "amount" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_27278fdb3e"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (48.2ms)[0m  [1m[35mCREATE INDEX "index_costs_on_agency_id" ON "costs" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141113"]]
  [1m[36mTRANSACTION (25.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUserTransactions (20220629141348)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (112.8ms)[0m  [1m[35mCREATE TABLE "user_transactions" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "user_id" uuid, "type_of" character varying, "receiver" character varying, "amount" integer, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_e0527492c6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (48.8ms)[0m  [1m[35mCREATE INDEX "index_user_transactions_on_user_id" ON "user_transactions" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141348"]]
  [1m[36mTRANSACTION (17.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAgencyTransactions (20220629141547)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (103.2ms)[0m  [1m[35mCREATE TABLE "agency_transactions" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agency_id" uuid NOT NULL, "type_of" character varying, "sender" character varying, "receiver" character varying, "amount" integer, "fee" integer DEFAULT 0, "code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f21bb2ac60"
FOREIGN KEY ("agency_id")
  REFERENCES "agencies" ("id")
)[0m
  [1m[35m (46.0ms)[0m  [1m[35mCREATE INDEX "index_agency_transactions_on_agency_id" ON "agency_transactions" ("agency_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220629141547"]]
  [1m[36mTRANSACTION (16.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-07-04 10:03:15.011648"], ["updated_at", "2022-07-04 10:03:15.011648"]]
  [1m[36mTRANSACTION (8.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(5765488955715387570)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/users/create" for ::1 at 2022-07-04 10:04:28 +0000
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Marion", "number"=>"0504030201"}}
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Create (3.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Marion"], ["number", "0504030201"], ["created_at", "2022-07-04 10:04:32.308549"], ["updated_at", "2022-07-04 10:04:32.308549"]]
  â†³ app/controllers/users_controller.rb:11:in `create'
  [1m[36mTRANSACTION (122.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:11:in `create'
Completed 200 OK in 374ms (Views: 2.2ms | ActiveRecord: 133.6ms | Allocations: 8126)


Started POST "/users/create" for ::1 at 2022-07-04 10:04:43 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Jean", "number"=>"0102030405"}}
  [1m[36mTRANSACTION (5.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:11:in `create'
  [1m[36mUser Create (3.9ms)[0m  [1m[32mINSERT INTO "users" ("name", "number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Jean"], ["number", "0102030405"], ["created_at", "2022-07-04 10:04:43.016556"], ["updated_at", "2022-07-04 10:04:43.016556"]]
  â†³ app/controllers/users_controller.rb:11:in `create'
  [1m[36mTRANSACTION (23.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:11:in `create'
Completed 200 OK in 51ms (Views: 0.5ms | ActiveRecord: 33.2ms | Allocations: 4059)


Started POST "/agencies/create" for ::1 at 2022-07-04 10:04:50 +0000
Processing by AgenciesController#create as */*
  Parameters: {"agency"=>{"name"=>"Dudu agency", "cost"=>800}}
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/agencies_controller.rb:9:in `create'
  [1m[36mAgency Create (1.8ms)[0m  [1m[32mINSERT INTO "agencies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Dudu agency"], ["created_at", "2022-07-04 10:04:50.745449"], ["updated_at", "2022-07-04 10:04:50.745449"]]
  â†³ app/controllers/agencies_controller.rb:9:in `create'
  [1m[36mTRANSACTION (24.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/agencies_controller.rb:9:in `create'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/agencies_controller.rb:10:in `create'
  [1m[36mAgency Load (2.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:10:in `create'
  [1m[36mCost Create (2.4ms)[0m  [1m[32mINSERT INTO "costs" ("agency_id", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["amount", 800], ["created_at", "2022-07-04 10:04:50.911900"], ["updated_at", "2022-07-04 10:04:50.911900"]]
  â†³ app/controllers/agencies_controller.rb:10:in `create'
  [1m[36mTRANSACTION (16.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/agencies_controller.rb:10:in `create'
Completed 200 OK in 224ms (Views: 0.4ms | ActiveRecord: 80.1ms | Allocations: 18974)


Started GET "/users" for ::1 at 2022-07-04 10:04:56 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 9ms (Views: 5.8ms | ActiveRecord: 2.4ms | Allocations: 1969)


Started GET "/agencies" for ::1 at 2022-07-04 10:05:01 +0000
Processing by AgenciesController#index as */*
  [1m[36mAgency Load (1.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies"[0m
  â†³ app/controllers/agencies_controller.rb:5:in `index'
Completed 200 OK in 5ms (Views: 3.2ms | ActiveRecord: 1.5ms | Allocations: 1841)


Started GET "/user/sold" for ::1 at 2022-07-04 10:05:10 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"number"=>"0504030201"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[35m (100.1ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "6be784e4-cf56-4159-8739-2486d3fdf06e"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 1761ms (Views: 0.7ms | ActiveRecord: 103.7ms | Allocations: 8676)


Started GET "/agency/sold" for ::1 at 2022-07-04 10:05:38 +0000
Processing by AgenciesController#sold as */*
  Parameters: {"agency"=>{"id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376"}}
  [1m[36mAgency Load (1.6ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[35m (22.7ms)[0m  [1m[34mSELECT "agency_transactions"."amount" FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"]]
  â†³ app/models/agency.rb:6:in `sold'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "agency_transactions"."fee" FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"]]
  â†³ app/models/agency.rb:14:in `fees'
Completed 200 OK in 142ms (Views: 0.6ms | ActiveRecord: 53.3ms | Allocations: 6516)


Started GET "/agency/transactions" for ::1 at 2022-07-04 10:08:05 +0000
Processing by AgenciesController#transactions as */*
  Parameters: {"agency"=>{"id"=>"e6222b53-8c92-49ed-93e2-e4fbc844a18f"}}
  [1m[36mAgency Load (1.6ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "e6222b53-8c92-49ed-93e2-e4fbc844a18f"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
Completed 404 Not Found in 5ms (ActiveRecord: 1.6ms | Allocations: 1834)


  
ActiveRecord::RecordNotFound (Couldn't find Agency with 'id'=e6222b53-8c92-49ed-93e2-e4fbc844a18f):
  
app/controllers/agencies_controller.rb:34:in `agency'
app/controllers/agencies_controller.rb:19:in `transactions'
Started GET "/agency/transactions" for ::1 at 2022-07-04 10:08:23 +0000
Processing by AgenciesController#transactions as */*
  Parameters: {"agency"=>{"id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376"}}
  [1m[36mAgency Load (2.1ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[36mCACHE Agency Load (0.2ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[36mAgencyTransaction Load (1.9ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"]]
  â†³ app/controllers/agencies_controller.rb:19:in `transactions'
Completed 200 OK in 34ms (Views: 7.7ms | ActiveRecord: 4.2ms | Allocations: 3587)


Started POST "/users/deposit" for ::1 at 2022-07-04 10:08:33 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>{"number"=>"0102030405", "amount"=>2000}, "user"=>{}}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:25:in `deposit'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:14:in `deposit'
  [1m[36mUserTransaction Create (2.1ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", "4c32ff47-60c9-4629-8b42-7a5b1a442fb1"], ["type_of", "deposit"], ["amount", 2000], ["created_at", "2022-07-04 10:08:33.697816"], ["updated_at", "2022-07-04 10:08:33.697816"]]
  â†³ app/models/user.rb:14:in `deposit'
  [1m[36mTRANSACTION (60.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:14:in `deposit'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "4c32ff47-60c9-4629-8b42-7a5b1a442fb1"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 94ms (Views: 0.4ms | ActiveRecord: 70.9ms | Allocations: 10556)


Started POST "/users/deposit" for ::1 at 2022-07-04 10:08:39 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>{"number"=>"0102030405", "amount"=>15000}, "user"=>{}}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:25:in `deposit'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:14:in `deposit'
  [1m[36mUserTransaction Create (2.5ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", "4c32ff47-60c9-4629-8b42-7a5b1a442fb1"], ["type_of", "deposit"], ["amount", 15000], ["created_at", "2022-07-04 10:08:39.344315"], ["updated_at", "2022-07-04 10:08:39.344315"]]
  â†³ app/models/user.rb:14:in `deposit'
  [1m[36mTRANSACTION (21.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:14:in `deposit'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "4c32ff47-60c9-4629-8b42-7a5b1a442fb1"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 42ms (Views: 0.8ms | ActiveRecord: 29.0ms | Allocations: 6376)


Started GET "/user/sold" for ::1 at 2022-07-04 10:08:45 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"number"=>"0504030201"}}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "6be784e4-cf56-4159-8739-2486d3fdf06e"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 32ms (Views: 0.6ms | ActiveRecord: 4.0ms | Allocations: 3459)


Started GET "/user/sold" for ::1 at 2022-07-04 10:08:53 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[35m (3.9ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "4c32ff47-60c9-4629-8b42-7a5b1a442fb1"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 39ms (Views: 0.5ms | ActiveRecord: 6.1ms | Allocations: 3462)


  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  [1m[36mAgency Load (0.7ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserTransaction Create (65.3ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "receiver", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", "4c32ff47-60c9-4629-8b42-7a5b1a442fb1"], ["type_of", "transfer"], ["receiver", "0504030201"], ["amount", -3000], ["code", "7522"], ["created_at", "2022-07-04 10:17:08.445590"], ["updated_at", "2022-07-04 10:17:08.445590"]]
  [1m[36mAgency Load (0.4ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  [1m[36mCost Load (0.5ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  [1m[36mAgency Load (0.4ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  [1m[36mCost Load (0.3ms)[0m  [1m[34mSELECT "costs".* FROM "costs" WHERE "costs"."agency_id" = $1 LIMIT $2[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  [1m[36mAgencyTransaction Create (1.4ms)[0m  [1m[32mINSERT INTO "agency_transactions" ("agency_id", "type_of", "sender", "receiver", "amount", "fee", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["type_of", "transfer"], ["sender", "0102030405"], ["receiver", "0504030201"], ["amount", 2200], ["fee", 800], ["code", "7522"], ["created_at", "2022-07-04 10:17:08.596599"], ["updated_at", "2022-07-04 10:17:08.596599"]]
  [1m[36mTRANSACTION (18.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUserTransaction Load (0.5ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUserTransaction Load (0.6ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."type_of" = $1 /* loading for inspect */ LIMIT $2[0m  [["type_of", "transfer"], ["LIMIT", 11]]
Started POST "/users/withdraw" for ::1 at 2022-07-04 10:31:31 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376", "code"=>""}, "user"=>{}}
  [1m[36mAgencyTransaction Load (1.3ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", ""], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `withdraw'
  [1m[36mUserTransaction Load (1.3ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."code" = $1 LIMIT $2[0m  [["code", ""], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `withdraw'
Completed 500 Internal Server Error in 274ms (ActiveRecord: 299.4ms | Allocations: 4816)


  
NoMethodError (undefined method `receiver' for nil:NilClass):
  
app/controllers/users_controller.rb:42:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-04 10:31:43 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376", "code"=>""}, "user"=>{}}
  [1m[36mAgencyTransaction Load (1.1ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", ""], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `withdraw'
  [1m[36mUserTransaction Load (1.8ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."code" = $1 LIMIT $2[0m  [["code", ""], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `withdraw'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 13.8ms | Allocations: 5231)


  
RuntimeError (nil):
  
app/controllers/users_controller.rb:42:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-04 10:32:28 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376", "code"=>"3094"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (2.3ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "3094"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `withdraw'
  [1m[36mUserTransaction Load (5.5ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."code" = $1 LIMIT $2[0m  [["code", "3094"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `withdraw'
Completed 500 Internal Server Error in 18ms (ActiveRecord: 7.8ms | Allocations: 2803)


  
RuntimeError (nil):
  
app/controllers/users_controller.rb:42:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-04 10:32:31 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376", "code"=>"3094"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (1.4ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "3094"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `withdraw'
  [1m[36mUserTransaction Load (1.3ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."code" = $1 LIMIT $2[0m  [["code", "3094"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `withdraw'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.7ms | Allocations: 2803)


  
RuntimeError (nil):
  
app/controllers/users_controller.rb:42:in `withdraw'
Started GET "/agency/transactions" for ::1 at 2022-07-04 10:32:55 +0000
Processing by AgenciesController#transactions as */*
  Parameters: {"agency"=>{"id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376"}}
  [1m[36mAgency Load (1.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[36mCACHE Agency Load (0.3ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[36mAgencyTransaction Load (1.7ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"]]
  â†³ app/controllers/agencies_controller.rb:19:in `transactions'
Completed 200 OK in 43ms (Views: 16.0ms | ActiveRecord: 15.3ms | Allocations: 11496)


Started GET "/user/transactions" for ::1 at 2022-07-04 10:33:18 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[36mUserTransaction Load (1.7ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "4c32ff47-60c9-4629-8b42-7a5b1a442fb1"]]
  â†³ app/controllers/users_controller.rb:21:in `transactions'
Completed 200 OK in 48ms (Views: 15.4ms | ActiveRecord: 16.0ms | Allocations: 10844)


Started GET "/user/transactions" for ::1 at 2022-07-04 10:33:46 +0000
Processing by UsersController#transactions as */*
  Parameters: {"user"=>{"number"=>"0504030201"}}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:48:in `user'
  [1m[36mUserTransaction Load (2.1ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "6be784e4-cf56-4159-8739-2486d3fdf06e"]]
  â†³ app/controllers/users_controller.rb:21:in `transactions'
Completed 200 OK in 14ms (Views: 2.6ms | ActiveRecord: 4.1ms | Allocations: 3635)


Started POST "/users/withdraw" for ::1 at 2022-07-04 10:34:46 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376", "code"=>"7522"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (1.9ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `withdraw'
  [1m[36mUserTransaction Load (1.6ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."code" = $1 LIMIT $2[0m  [["code", "7522"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `withdraw'
Completed 500 Internal Server Error in 10ms (ActiveRecord: 3.5ms | Allocations: 2943)


  
RuntimeError (#<AgencyTransaction id: "48f8475c-9e0e-4ed8-9616-c06638e56f47", agency_id: "6462c5ab-dd0b-418d-8686-c6a524af0376", type_of: "transfer", sender: "0102030405", receiver: "0504030201", amount: 2200, fee: 800, code: "7522", created_at: "2022-07-04 10:17:08.596599000 +0000", updated_at: "2022-07-04 10:17:08.596599000 +0000">):
  
app/controllers/users_controller.rb:42:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-04 10:35:52 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376", "code"=>"7522"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (1.8ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `withdraw'
  [1m[36mUserTransaction Load (1.2ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."code" = $1 LIMIT $2[0m  [["code", "7522"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `withdraw'
Completed 500 Internal Server Error in 70ms (ActiveRecord: 19.0ms | Allocations: 12597)


  
RuntimeError ("0504030201"):
  
app/controllers/users_controller.rb:42:in `withdraw'
  [1m[36mAgencyTransaction Load (0.4ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."type_of" = $1 /* loading for inspect */ LIMIT $2[0m  [["type_of", "withdraw"], ["LIMIT", 11]]
  [1m[36mAgencyTransaction Load (0.4ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."type_of" = $1 /* loading for inspect */ LIMIT $2[0m  [["type_of", "transfer"], ["LIMIT", 11]]
Started GET "/agency/transactions" for ::1 at 2022-07-04 10:51:56 +0000
Processing by AgenciesController#transactions as */*
  Parameters: {"agency"=>{"id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376"}}
  [1m[36mAgency Load (1.6ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[36mCACHE Agency Load (0.0ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  â†³ app/controllers/agencies_controller.rb:34:in `agency'
  [1m[36mAgencyTransaction Load (1.5ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"]]
  â†³ app/controllers/agencies_controller.rb:19:in `transactions'
Completed 200 OK in 138ms (Views: 12.7ms | ActiveRecord: 84.0ms | Allocations: 18041)


Started POST "/users/withdraw" for ::1 at 2022-07-04 10:52:10 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376", "code"=>"7522"}, "user"=>{}}
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms | Allocations: 3333)


  
NameError (undefined local variable or method `agency_trs' for #<UsersController:0x0000000000f910>
Did you mean?  agency_transfer_url):
  
app/controllers/users_controller.rb:40:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-04 11:12:16 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376", "code"=>"7522"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (1.4ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:41:in `withdraw'
Completed 500 Internal Server Error in 38ms (ActiveRecord: 74.2ms | Allocations: 7486)


  
NoMethodError (undefined method `withdraw' for "0504030201":String):
  
app/controllers/users_controller.rb:43:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-04 11:15:42 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376", "code"=>"7522"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (2.4ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:41:in `withdraw'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:43:in `withdraw'
  [1m[36mCACHE AgencyTransaction Load (0.1ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/models/user.rb:44:in `withdraw'
Completed 500 Internal Server Error in 103ms (ActiveRecord: 18.7ms | Allocations: 14565)


  
NameError (undefined local variable or method `amount' for #<User:0x0000562cebaa0f78>):
  
app/models/user.rb:49:in `block in withdraw'
app/models/user.rb:45:in `withdraw'
app/controllers/users_controller.rb:44:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-04 11:17:50 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376", "code"=>"7522"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (1.9ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:41:in `withdraw'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:43:in `withdraw'
  [1m[36mCACHE AgencyTransaction Load (0.0ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/models/user.rb:44:in `withdraw'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:46:in `block in withdraw'
  [1m[36mUserTransaction Create (33.4ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", "6be784e4-cf56-4159-8739-2486d3fdf06e"], ["type_of", "withdraw"], ["amount", 2200], ["code", "7522"], ["created_at", "2022-07-04 11:17:50.921203"], ["updated_at", "2022-07-04 11:17:50.921203"]]
  â†³ app/models/user.rb:46:in `block in withdraw'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/user.rb:45:in `withdraw'
Completed 500 Internal Server Error in 102ms (ActiveRecord: 58.8ms | Allocations: 22899)


  
NameError (undefined local variable or method `agency' for #<User:0x00007fd928375538>
Did you mean?  agency_cost):
  
app/models/user.rb:53:in `block in withdraw'
app/models/user.rb:45:in `withdraw'
app/controllers/users_controller.rb:44:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-04 11:19:00 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376", "code"=>"7522"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (1.4ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:41:in `withdraw'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:43:in `withdraw'
  [1m[36mAgency Load (1.4ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  â†³ app/models/user.rb:44:in `withdraw'
  [1m[36mCACHE AgencyTransaction Load (0.0ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/models/user.rb:45:in `withdraw'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:47:in `block in withdraw'
  [1m[36mUserTransaction Create (1.6ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", "6be784e4-cf56-4159-8739-2486d3fdf06e"], ["type_of", "withdraw"], ["amount", 2200], ["code", "7522"], ["created_at", "2022-07-04 11:19:00.960177"], ["updated_at", "2022-07-04 11:19:00.960177"]]
  â†³ app/models/user.rb:47:in `block in withdraw'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/user.rb:46:in `withdraw'
Completed 500 Internal Server Error in 103ms (ActiveRecord: 31.4ms | Allocations: 27799)


  
NameError (undefined local variable or method `receiver' for #<User:0x00007fd928674478>):
  
app/models/user.rb:58:in `block in withdraw'
app/models/user.rb:46:in `withdraw'
app/controllers/users_controller.rb:44:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-04 11:44:00 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376", "code"=>"7522"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (1.8ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:41:in `withdraw'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:43:in `withdraw'
  [1m[36mAgency Load (2.2ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  â†³ app/models/user.rb:44:in `withdraw'
  [1m[36mCACHE AgencyTransaction Load (0.0ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/models/user.rb:45:in `withdraw'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:47:in `block in withdraw'
  [1m[36mUserTransaction Create (34.0ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", "6be784e4-cf56-4159-8739-2486d3fdf06e"], ["type_of", "withdraw"], ["amount", 2200], ["code", "7522"], ["created_at", "2022-07-04 11:44:01.849832"], ["updated_at", "2022-07-04 11:44:01.849832"]]
  â†³ app/models/user.rb:47:in `block in withdraw'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/user.rb:46:in `withdraw'
Completed 500 Internal Server Error in 141ms (ActiveRecord: 122.0ms | Allocations: 22344)


  
NoMethodError (undefined method `number' for "0504030201":String):
  
app/models/user.rb:58:in `block in withdraw'
app/models/user.rb:46:in `withdraw'
app/controllers/users_controller.rb:44:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-04 11:44:35 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376", "code"=>"7522"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (2.1ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:41:in `withdraw'
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:43:in `withdraw'
  [1m[36mAgency Load (1.9ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  â†³ app/models/user.rb:44:in `withdraw'
  [1m[36mCACHE AgencyTransaction Load (0.0ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/models/user.rb:45:in `withdraw'
Completed 500 Internal Server Error in 68ms (ActiveRecord: 28.3ms | Allocations: 15199)


  
RuntimeError (#<AgencyTransaction id: "48f8475c-9e0e-4ed8-9616-c06638e56f47", agency_id: "6462c5ab-dd0b-418d-8686-c6a524af0376", type_of: "transfer", sender: "0102030405", receiver: "0504030201", amount: 2200, fee: 800, code: "7522", created_at: "2022-07-04 10:17:08.596599000 +0000", updated_at: "2022-07-04 10:17:08.596599000 +0000">):
  
app/models/user.rb:46:in `withdraw'
app/controllers/users_controller.rb:44:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-04 11:45:36 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376", "code"=>"7522"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (1.7ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:41:in `withdraw'
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:43:in `withdraw'
  [1m[36mAgency Load (1.2ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  â†³ app/models/user.rb:44:in `withdraw'
  [1m[36mCACHE AgencyTransaction Load (0.0ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/models/user.rb:45:in `withdraw'
Completed 500 Internal Server Error in 143ms (ActiveRecord: 36.2ms | Allocations: 17512)


  
NoMethodError (undefined method `number' for #<AgencyTransaction:0x0000562cebaa1fb8>):
  
app/models/user.rb:46:in `withdraw'
app/controllers/users_controller.rb:44:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-04 11:46:06 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376", "code"=>"7522"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (1.4ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:41:in `withdraw'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:43:in `withdraw'
  [1m[36mAgency Load (1.8ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  â†³ app/models/user.rb:44:in `withdraw'
  [1m[36mCACHE AgencyTransaction Load (0.0ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/models/user.rb:45:in `withdraw'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/models/user.rb:46:in `withdraw'
Completed 500 Internal Server Error in 61ms (ActiveRecord: 22.0ms | Allocations: 15551)


  
RuntimeError (#<User id: "6be784e4-cf56-4159-8739-2486d3fdf06e", name: "Marion", number: "0504030201", created_at: "2022-07-04 10:04:32.308549000 +0000", updated_at: "2022-07-04 10:04:32.308549000 +0000">):
  
app/models/user.rb:47:in `withdraw'
app/controllers/users_controller.rb:44:in `withdraw'
Started POST "/users/withdraw" for ::1 at 2022-07-04 11:47:04 +0000
Processing by UsersController#withdraw as */*
  Parameters: {"withdraw"=>{"agency_id"=>"6462c5ab-dd0b-418d-8686-c6a524af0376", "code"=>"7522"}, "user"=>{}}
  [1m[36mAgencyTransaction Load (1.3ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:41:in `withdraw'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:43:in `withdraw'
  [1m[36mAgency Load (1.5ms)[0m  [1m[34mSELECT "agencies".* FROM "agencies" WHERE "agencies"."id" = $1 LIMIT $2[0m  [["id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["LIMIT", 1]]
  â†³ app/models/user.rb:44:in `withdraw'
  [1m[36mCACHE AgencyTransaction Load (0.0ms)[0m  [1m[34mSELECT "agency_transactions".* FROM "agency_transactions" WHERE "agency_transactions"."agency_id" = $1 AND "agency_transactions"."code" = $2 LIMIT $3[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["code", "7522"], ["LIMIT", 1]]
  â†³ app/models/user.rb:45:in `withdraw'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:47:in `block in withdraw'
  [1m[36mUserTransaction Create (2.3ms)[0m  [1m[32mINSERT INTO "user_transactions" ("user_id", "type_of", "amount", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", "6be784e4-cf56-4159-8739-2486d3fdf06e"], ["type_of", "withdraw"], ["amount", 2200], ["code", "7522"], ["created_at", "2022-07-04 11:47:04.630404"], ["updated_at", "2022-07-04 11:47:04.630404"]]
  â†³ app/models/user.rb:47:in `block in withdraw'
  [1m[36mAgencyTransaction Create (2.9ms)[0m  [1m[32mINSERT INTO "agency_transactions" ("agency_id", "type_of", "receiver", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["agency_id", "6462c5ab-dd0b-418d-8686-c6a524af0376"], ["type_of", "withdraw"], ["receiver", "0504030201"], ["amount", -2200], ["created_at", "2022-07-04 11:47:04.639981"], ["updated_at", "2022-07-04 11:47:04.639981"]]
  â†³ app/models/user.rb:54:in `block in withdraw'
  [1m[36mTRANSACTION (15.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/user.rb:46:in `withdraw'
  [1m[36mUserTransaction Load (2.0ms)[0m  [1m[34mSELECT "user_transactions".* FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "6be784e4-cf56-4159-8739-2486d3fdf06e"]]
  â†³ app/controllers/users_controller.rb:45:in `withdraw'
Completed 200 OK in 132ms (Views: 4.4ms | ActiveRecord: 51.5ms | Allocations: 28050)


Started GET "/user/sold" for ::1 at 2022-07-04 11:47:24 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:50:in `user'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:50:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:50:in `user'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "4c32ff47-60c9-4629-8b42-7a5b1a442fb1"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 17ms (Views: 0.6ms | ActiveRecord: 4.6ms | Allocations: 3465)


Started GET "/user/sold" for ::1 at 2022-07-04 11:47:30 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"number"=>"0102030405"}}
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:50:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:50:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0102030405"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:50:in `user'
  [1m[35m (7.2ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "4c32ff47-60c9-4629-8b42-7a5b1a442fb1"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 41ms (Views: 0.6ms | ActiveRecord: 13.1ms | Allocations: 3461)


Started GET "/user/sold" for ::1 at 2022-07-04 11:47:41 +0000
Processing by UsersController#sold as */*
  Parameters: {"user"=>{"number"=>"0504030201"}}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:50:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:50:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."number" = $1 LIMIT $2[0m  [["number", "0504030201"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:50:in `user'
  [1m[35m (4.4ms)[0m  [1m[34mSELECT "user_transactions"."amount" FROM "user_transactions" WHERE "user_transactions"."user_id" = $1[0m  [["user_id", "6be784e4-cf56-4159-8739-2486d3fdf06e"]]
  â†³ app/models/user.rb:5:in `sold'
Completed 200 OK in 23ms (Views: 0.5ms | ActiveRecord: 7.2ms | Allocations: 3459)


